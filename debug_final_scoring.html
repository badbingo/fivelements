<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ€ç»ˆè¯„åˆ†å¯¹æ¯”è°ƒè¯•</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5rem;
        }
        .test-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 5px solid #007bff;
        }
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        .score-panel {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .score-panel h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        .score-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        .score-item:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 1.1rem;
            background: #f8f9fa;
            margin: 10px -10px -10px -10px;
            padding: 15px 10px;
            border-radius: 5px;
        }
        .score-value {
            font-weight: bold;
            color: #007bff;
        }
        .difference-panel {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
        }
        .difference-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        .difference-item:last-child {
            border-bottom: none;
        }
        .diff-positive {
            color: #28a745;
        }
        .diff-negative {
            color: #dc3545;
        }
        .diff-zero {
            color: #6c757d;
        }
        .debug-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
        }
        .debug-section h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        .debug-info {
            font-family: 'Courier New', monospace;
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap;
            font-size: 0.9rem;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” æœ€ç»ˆè¯„åˆ†å¯¹æ¯”è°ƒè¯•å·¥å…·</h1>
        
        <div class="test-info">
            <h3>ğŸ“‹ æµ‹è¯•å…«å­—ä¿¡æ¯</h3>
            <p><strong>å…«å­—ï¼š</strong>å£¬å­ï¼Œç™¸ä¸‘ï¼Œå·±å·³ï¼Œç™¸é…‰</p>
            <p><strong>æ—¥ä¸»ï¼š</strong>å·±åœŸ</p>
            <p><strong>æµ‹è¯•ç›®çš„ï¼š</strong>å¯¹æ¯”baziphone.htmlå’Œåº”ç”¨çš„å‘½æ ¼è¯„åˆ†å·®å¼‚</p>
        </div>

        <div class="comparison-grid">
            <div class="score-panel">
                <h3>ğŸ“Š baziphone.html è¯„åˆ†</h3>
                <div id="html-scores"></div>
            </div>
            
            <div class="score-panel">
                <h3>ğŸ“± åº”ç”¨è¯„åˆ† (ä¿®å¤å)</h3>
                <div id="app-scores"></div>
            </div>
        </div>

        <div class="difference-panel">
            <h3>ğŸ“ˆ è¯„åˆ†å·®å¼‚åˆ†æ</h3>
            <div id="differences"></div>
        </div>

        <div class="debug-section">
            <h3>ğŸ”§ è¯¦ç»†è°ƒè¯•ä¿¡æ¯</h3>
            <div id="debug-info" class="debug-info"></div>
        </div>
    </div>

    <script>
        // æµ‹è¯•å…«å­—
        const testPillars = {
            year: 'å£¬å­',
            month: 'ç™¸ä¸‘', 
            day: 'å·±å·³',
            hour: 'ç™¸é…‰'
        };

        // æ¨¡æ‹Ÿbaziphone.htmlçš„è¯„åˆ†ç®—æ³•ï¼ˆåŸºäºå®é™…è§‚å¯Ÿï¼‰
        function simulateHtmlScoring(pillars) {
            // è¿™äº›æ•°å€¼éœ€è¦æ ¹æ®å®é™…baziphone.htmlçš„è¾“å‡ºæ¥è°ƒæ•´
            const seasonScore = 13;     // å­£èŠ‚åŠ©åŠ›
            const balanceScore = 15;    // äº”è¡Œå¹³è¡¡  
            const patternScore = 15;    // æ ¼å±€ç»“æ„
            const godsScore = 10;       // åç¥å½±å“
            const combinationScore = 10; // ç»„åˆåˆ‘å†²
            const adjustmentScore = 6;  // è°ƒå€™ç”¨ç¥
            
            const dayMasterStrength = 6; // æ—¥ä¸»å¼ºå¼±
            const usefulGodScore = 6;    // ç”¨ç¥å¾—åŠ›
            const tabooGodControl = 4;   // å¿Œç¥åˆ¶çº¦
            const luckSupport = 3;       // æµå¹´åŠ©åŠ›
            const dayunCoordination = 2; // å¤§è¿é…åˆ
            const noblesSupport = 5;     // è´µäººåŠ©åŠ›
            const specialPatternBonus = 6; // ç‰¹æ®Šæ ¼å±€
            const levelBonus = 3;        // å‘½æ ¼å±‚æ¬¡
            const kongWangPenalty = 2;   // ç©ºäº¡å‡åˆ†
            
            const total = 10 + seasonScore + balanceScore + patternScore + godsScore + combinationScore +
                         dayMasterStrength + usefulGodScore + tabooGodControl + adjustmentScore +
                         luckSupport + dayunCoordination + noblesSupport + levelBonus + specialPatternBonus - kongWangPenalty;
            
            return {
                seasonScore,
                balanceScore, 
                patternScore,
                godsScore,
                combinationScore,
                adjustmentScore,
                dayMasterStrength,
                usefulGodScore,
                tabooGodControl,
                luckSupport,
                dayunCoordination,
                noblesSupport,
                specialPatternBonus,
                levelBonus,
                kongWangPenalty,
                total
            };
        }

        // æ¨¡æ‹Ÿåº”ç”¨çš„è¯„åˆ†ç®—æ³•ï¼ˆä¿®å¤åï¼‰
        function simulateAppScoring(pillars) {
            // åŸºäºä¿®å¤åçš„åº”ç”¨ç®—æ³•
            const seasonScore = 13;     // å­£èŠ‚åŠ©åŠ›
            const balanceScore = 15;    // äº”è¡Œå¹³è¡¡
            const patternScore = 15;    // æ ¼å±€ç»“æ„
            const godsScore = 10;       // åç¥å½±å“
            const combinationScore = 10; // ç»„åˆåˆ‘å†²
            const adjustmentScore = 6;  // è°ƒå€™ç”¨ç¥
            
            const dayMasterStrength = 6; // æ—¥ä¸»å¼ºå¼±
            const usefulGodScore = 6;    // ç”¨ç¥å¾—åŠ›
            const tabooGodControl = 4;   // å¿Œç¥åˆ¶çº¦
            const luckSupport = 3;       // æµå¹´åŠ©åŠ›
            const dayunCoordination = 2; // å¤§è¿é…åˆ
            const noblesSupport = 5;     // è´µäººåŠ©åŠ›
            const specialPatternBonus = 6; // ç‰¹æ®Šæ ¼å±€
            const levelBonus = 0;        // å‘½æ ¼å±‚æ¬¡: 0åˆ† (åº”ç”¨ä¸­æš‚æœªå®ç°)
            const kongWangPenalty = 2;   // ç©ºäº¡å‡åˆ†
            
            const total = 10 + seasonScore + balanceScore + patternScore + godsScore + combinationScore +
                         dayMasterStrength + usefulGodScore + tabooGodControl + adjustmentScore +
                         luckSupport + dayunCoordination + noblesSupport + levelBonus + specialPatternBonus - kongWangPenalty;
            
            return {
                seasonScore,
                balanceScore,
                patternScore,
                godsScore,
                combinationScore,
                adjustmentScore,
                dayMasterStrength,
                usefulGodScore,
                tabooGodControl,
                luckSupport,
                dayunCoordination,
                noblesSupport,
                specialPatternBonus,
                levelBonus,
                kongWangPenalty,
                total
            };
        }

        // æ˜¾ç¤ºè¯„åˆ†å¯¹æ¯”
        function displayScoreComparison() {
            const htmlScores = simulateHtmlScoring(testPillars);
            const appScores = simulateAppScoring(testPillars);
            
            // æ˜¾ç¤ºHTMLè¯„åˆ†
            const htmlScoresDiv = document.getElementById('html-scores');
            htmlScoresDiv.innerHTML = `
                <div class="score-item"><span>å­£èŠ‚åŠ©åŠ›</span><span class="score-value">${htmlScores.seasonScore}åˆ†</span></div>
                <div class="score-item"><span>äº”è¡Œå¹³è¡¡</span><span class="score-value">${htmlScores.balanceScore}åˆ†</span></div>
                <div class="score-item"><span>æ ¼å±€ç»“æ„</span><span class="score-value">${htmlScores.patternScore}åˆ†</span></div>
                <div class="score-item"><span>åç¥å½±å“</span><span class="score-value">${htmlScores.godsScore}åˆ†</span></div>
                <div class="score-item"><span>ç»„åˆåˆ‘å†²</span><span class="score-value">${htmlScores.combinationScore}åˆ†</span></div>
                <div class="score-item"><span>è°ƒå€™ç”¨ç¥</span><span class="score-value">${htmlScores.adjustmentScore}åˆ†</span></div>
                <div class="score-item"><span>æ—¥ä¸»å¼ºå¼±</span><span class="score-value">${htmlScores.dayMasterStrength}åˆ†</span></div>
                <div class="score-item"><span>ç”¨ç¥å¾—åŠ›</span><span class="score-value">${htmlScores.usefulGodScore}åˆ†</span></div>
                <div class="score-item"><span>å¿Œç¥åˆ¶çº¦</span><span class="score-value">${htmlScores.tabooGodControl}åˆ†</span></div>
                <div class="score-item"><span>æµå¹´åŠ©åŠ›</span><span class="score-value">${htmlScores.luckSupport}åˆ†</span></div>
                <div class="score-item"><span>å¤§è¿é…åˆ</span><span class="score-value">${htmlScores.dayunCoordination}åˆ†</span></div>
                <div class="score-item"><span>è´µäººåŠ©åŠ›</span><span class="score-value">${htmlScores.noblesSupport}åˆ†</span></div>
                <div class="score-item"><span>ç‰¹æ®Šæ ¼å±€</span><span class="score-value">${htmlScores.specialPatternBonus}åˆ†</span></div>
                <div class="score-item"><span>å‘½æ ¼å±‚æ¬¡</span><span class="score-value">${htmlScores.levelBonus}åˆ†</span></div>
                <div class="score-item"><span>ç©ºäº¡å‡åˆ†</span><span class="score-value">-${htmlScores.kongWangPenalty}åˆ†</span></div>
                <div class="score-item"><span>æ€»åˆ†</span><span class="score-value">${htmlScores.total}åˆ†</span></div>
            `;
            
            // æ˜¾ç¤ºåº”ç”¨è¯„åˆ†
            const appScoresDiv = document.getElementById('app-scores');
            appScoresDiv.innerHTML = `
                <div class="score-item"><span>å­£èŠ‚åŠ©åŠ›</span><span class="score-value">${appScores.seasonScore}åˆ†</span></div>
                <div class="score-item"><span>äº”è¡Œå¹³è¡¡</span><span class="score-value">${appScores.balanceScore}åˆ†</span></div>
                <div class="score-item"><span>æ ¼å±€ç»“æ„</span><span class="score-value">${appScores.patternScore}åˆ†</span></div>
                <div class="score-item"><span>åç¥å½±å“</span><span class="score-value">${appScores.godsScore}åˆ†</span></div>
                <div class="score-item"><span>ç»„åˆåˆ‘å†²</span><span class="score-value">${appScores.combinationScore}åˆ†</span></div>
                <div class="score-item"><span>è°ƒå€™ç”¨ç¥</span><span class="score-value">${appScores.adjustmentScore}åˆ†</span></div>
                <div class="score-item"><span>æ—¥ä¸»å¼ºå¼±</span><span class="score-value">${appScores.dayMasterStrength}åˆ†</span></div>
                <div class="score-item"><span>ç”¨ç¥å¾—åŠ›</span><span class="score-value">${appScores.usefulGodScore}åˆ†</span></div>
                <div class="score-item"><span>å¿Œç¥åˆ¶çº¦</span><span class="score-value">${appScores.tabooGodControl}åˆ†</span></div>
                <div class="score-item"><span>æµå¹´åŠ©åŠ›</span><span class="score-value">${appScores.luckSupport}åˆ†</span></div>
                <div class="score-item"><span>å¤§è¿é…åˆ</span><span class="score-value">${appScores.dayunCoordination}åˆ†</span></div>
                <div class="score-item"><span>è´µäººåŠ©åŠ›</span><span class="score-value">${appScores.noblesSupport}åˆ†</span></div>
                <div class="score-item"><span>ç‰¹æ®Šæ ¼å±€</span><span class="score-value">${appScores.specialPatternBonus}åˆ†</span></div>
                <div class="score-item"><span>å‘½æ ¼å±‚æ¬¡</span><span class="score-value">${appScores.levelBonus}åˆ†</span></div>
                <div class="score-item"><span>ç©ºäº¡å‡åˆ†</span><span class="score-value">-${appScores.kongWangPenalty}åˆ†</span></div>
                <div class="score-item"><span>æ€»åˆ†</span><span class="score-value">${appScores.total}åˆ†</span></div>
            `;
            
            // æ˜¾ç¤ºå·®å¼‚åˆ†æ
            const differencesDiv = document.getElementById('differences');
            const scoreItems = [
                'å­£èŠ‚åŠ©åŠ›', 'äº”è¡Œå¹³è¡¡', 'æ ¼å±€ç»“æ„', 'åç¥å½±å“', 'ç»„åˆåˆ‘å†²', 'è°ƒå€™ç”¨ç¥',
                'æ—¥ä¸»å¼ºå¼±', 'ç”¨ç¥å¾—åŠ›', 'å¿Œç¥åˆ¶çº¦', 'æµå¹´åŠ©åŠ›', 'å¤§è¿é…åˆ', 'è´µäººåŠ©åŠ›',
                'ç‰¹æ®Šæ ¼å±€', 'å‘½æ ¼å±‚æ¬¡', 'ç©ºäº¡å‡åˆ†', 'æ€»åˆ†'
            ];
            
            const scoreKeys = [
                'seasonScore', 'balanceScore', 'patternScore', 'godsScore', 'combinationScore', 'adjustmentScore',
                'dayMasterStrength', 'usefulGodScore', 'tabooGodControl', 'luckSupport', 'dayunCoordination', 'noblesSupport',
                'specialPatternBonus', 'levelBonus', 'kongWangPenalty', 'total'
            ];
            
            let differencesHtml = '';
            let totalDifference = 0;
            
            scoreItems.forEach((item, index) => {
                const key = scoreKeys[index];
                const htmlValue = htmlScores[key];
                const appValue = appScores[key];
                const diff = appValue - htmlValue;
                
                if (key === 'kongWangPenalty') {
                    // ç©ºäº¡å‡åˆ†æ˜¯è´Ÿå€¼ï¼Œæ‰€ä»¥å·®å¼‚è®¡ç®—ç›¸å
                    const actualDiff = htmlValue - appValue;
                    totalDifference += actualDiff;
                    const diffClass = actualDiff > 0 ? 'diff-positive' : actualDiff < 0 ? 'diff-negative' : 'diff-zero';
                    const diffText = actualDiff > 0 ? `+${actualDiff}` : actualDiff.toString();
                    differencesHtml += `<div class="difference-item"><span>${item}</span><span class="${diffClass}">${diffText}åˆ†</span></div>`;
                } else {
                    totalDifference += diff;
                    const diffClass = diff > 0 ? 'diff-positive' : diff < 0 ? 'diff-negative' : 'diff-zero';
                    const diffText = diff > 0 ? `+${diff}` : diff.toString();
                    differencesHtml += `<div class="difference-item"><span>${item}</span><span class="${diffClass}">${diffText}åˆ†</span></div>`;
                }
            });
            
            const totalDiffClass = totalDifference > 0 ? 'diff-positive' : totalDifference < 0 ? 'diff-negative' : 'diff-zero';
            const totalDiffText = totalDifference > 0 ? `+${totalDifference}` : totalDifference.toString();
            differencesHtml += `<div class="difference-item" style="font-weight: bold; font-size: 1.1rem; background: #f8f9fa; margin: 10px -10px -10px -10px; padding: 15px 10px; border-radius: 5px;"><span>æ€»å·®å¼‚</span><span class="${totalDiffClass}">${totalDiffText}åˆ†</span></div>`;
            
            differencesDiv.innerHTML = differencesHtml;
            
            // æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
            const debugInfo = document.getElementById('debug-info');
            debugInfo.textContent = `
ğŸ” è¯¦ç»†è°ƒè¯•ä¿¡æ¯:

ğŸ“Š baziphone.html è¯„åˆ†è¯¦æƒ…:
${JSON.stringify(htmlScores, null, 2)}

ğŸ“± åº”ç”¨è¯„åˆ†è¯¦æƒ… (ä¿®å¤å):
${JSON.stringify(appScores, null, 2)}

ğŸ“ˆ ä¸»è¦å·®å¼‚åˆ†æ:
- å‘½æ ¼å±‚æ¬¡å·®å¼‚: ${appScores.levelBonus - htmlScores.levelBonus}åˆ† (åº”ç”¨ä¸­æš‚æœªå®ç°levelBonuså‡½æ•°)
- æ€»å·®å¼‚: ${totalDifference}åˆ†

ğŸ¯ ä¿®å¤å»ºè®®:
1. å®ç°åº”ç”¨ä¸­çš„calculateLevelBonuså‡½æ•°
2. ç¡®ä¿æ‰€æœ‰è¯„åˆ†é¡¹ç›®çš„è®¡ç®—é€»è¾‘ä¸baziphone.htmlå®Œå…¨ä¸€è‡´
3. éªŒè¯å„ä¸ªè¯„åˆ†å‡½æ•°çš„è¿”å›å€¼èŒƒå›´
4. æ£€æŸ¥å®é™…è¿è¡Œæ—¶çš„è¯„åˆ†æ•°å€¼æ˜¯å¦ä¸é¢„æœŸä¸€è‡´
            `;
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            displayScoreComparison();
            console.log('ğŸ” æœ€ç»ˆè¯„åˆ†å¯¹æ¯”è°ƒè¯•å·¥å…·å·²åŠ è½½');
        });
    </script>
</body>
</html>