<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>八字命理 - 趋吉避凶之道 | 麦八字教学网</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href=css/index.css">
    <style>
        /* 基础样式 */
        body {
            font-family: 'Noto Serif SC', serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
        }
        
        /* 生肖图标样式 */
        .zodiac-icon {
            display: inline-block;
            margin: 0 5px;
            text-align: center;
        }
        
        .zodiac-icon img {
            width: 40px;
            height: 40px;
            transition: all 0.3s ease;
        }
        
        /* 游戏区域生肖图标 */
        .game-area .zodiac-icon img {
            width: 50px;
            height: 50px;
        }
        
        .zodiac-option {
            cursor: pointer;
            margin: 5px;
            display: inline-block;
        }
        
        .zodiac-option.selected {
            transform: scale(1.1);
            filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.7));
        }
        
        /* 排行榜样式 */
        .ranking-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .ranking-tab {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .ranking-tab.active {
            border-bottom-color: #4CAF50;
            font-weight: bold;
        }
        
        .ranking-tab-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        .ranking-tab-content.active {
            display: block;
        }
        
        .ranking-item {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 10px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        /* 能量预测样式 */
        .forecast-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .forecast-tab {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .forecast-tab.active {
            border-bottom-color: #2196F3;
            font-weight: bold;
        }
        
        .forecast-tab-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        .forecast-tab-content.active {
            display: block;
        }
        
        /* 动画效果 */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* 游戏结果样式 */
        .game-result {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <!-- 内容区域 -->
    <section class="content-section">
        <!-- 生肖运势排行榜 -->
        <div class="ranking-container">
            <h2><i class="fas fa-trophy"></i> 2025年生肖运势排行榜</h2>
            
            <div class="ranking-tabs">
                <button class="ranking-tab active" data-tab="overall">综合运势</button>
                <button class="ranking-tab" data-tab="wealth">财运排行</button>
                <button class="ranking-tab" data-tab="career">事业排行</button>
                <button class="ranking-tab" data-tab="love">感情排行</button>
                <button class="ranking-tab" data-tab="health">健康排行</button>
            </div>
            
            <div class="ranking-content">
                <div class="ranking-tab-content active" id="overall-ranking">
                    <div class="ranking-list" id="overall-list"></div>
                </div>
                <div class="ranking-tab-content" id="wealth-ranking">
                    <div class="ranking-list" id="wealth-list"></div>
                </div>
                <div class="ranking-tab-content" id="career-ranking">
                    <div class="ranking-list" id="career-list"></div>
                </div>
                <div class="ranking-tab-content" id="love-ranking">
                    <div class="ranking-list" id="love-list"></div>
                </div>
                <div class="ranking-tab-content" id="health-ranking">
                    <div class="ranking-list" id="health-list"></div>
                </div>
            </div>
        </div>
        
        <!-- 能量预测 -->
        <div class="energy-forecast-container">
            <h2><i class="fas fa-chart-line"></i> 能量预测</h2>
            
            <div class="forecast-tabs">
                <button class="forecast-tab active" data-tab="year">年度能量</button>
                <button class="forecast-tab" data-tab="month">本月能量</button>
                <button class="forecast-tab" data-tab="week">本周能量</button>
            </div>
            
            <div class="forecast-content">
                <div class="forecast-tab-content active" id="year-forecast">
                    <div class="forecast-desc" id="year-energy-desc"></div>
                    <div class="energy-graph" id="year-energy-graph"></div>
                </div>
                <div class="forecast-tab-content" id="month-forecast">
                    <div class="forecast-desc" id="month-energy-desc"></div>
                    <div class="energy-graph" id="month-energy-graph"></div>
                </div>
                <div class="forecast-tab-content" id="week-forecast">
                    <div class="forecast-desc" id="week-energy-desc"></div>
                    <div class="energy-graph" id="week-energy-graph"></div>
                </div>
            </div>
        </div>
        
        <!-- 生肖互动小游戏 -->
        <div class="zodiac-game-container">
            <h2><i class="fas fa-gamepad"></i> 生肖互动小游戏</h2>
            <div class="game-content">
                <div class="game-intro">
                    <p>测试你与不同生肖的契合度，看看哪些生肖是你的贵人！</p>
                </div>
                <div class="game-area">
                    <div class="user-zodiac-selector">
                        <h3>选择你的生肖</h3>
                        <div class="zodiac-selector" id="user-zodiac"></div>
                    </div>
                    <div class="target-zodiac-selector">
                        <h3>选择目标生肖</h3>
                        <div class="zodiac-selector" id="target-zodiac"></div>
                    </div>
                    <button class="game-button" id="check-compatibility">测试契合度</button>
                    <div class="game-result" id="compatibility-result"></div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // 新的卡通风格生肖图标
        const zodiacIcons = {
            "rat": { name: "鼠", image: "https://i.imgur.com/JqYeZ0p.png" },
            "ox": { name: "牛", image: "https://i.imgur.com/8mTnWQk.png" },
            "tiger": { name: "虎", image: "https://i.imgur.com/5XvW9dP.png" },
            "rabbit": { name: "兔", image: "https://i.imgur.com/LkZ4GgQ.png" },
            "dragon": { name: "龙", image: "https://i.imgur.com/VvVhJyW.png" },
            "snake": { name: "蛇", image: "https://i.imgur.com/tjHcB7U.png" },
            "horse": { name: "马", image: "https://i.imgur.com/9QYqjJN.png" },
            "sheep": { name: "羊", image: "https://i.imgur.com/3sKk7fz.png" },
            "monkey": { name: "猴", image: "https://i.imgur.com/RbVvQ2G.png" },
            "rooster": { name: "鸡", image: "https://i.imgur.com/pLmDZqy.png" },
            "dog": { name: "狗", image: "https://i.imgur.com/9tKjJ7L.png" },
            "pig": { name: "猪", image: "https://i.imgur.com/qzGvW1E.png" }
        };

        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 加载八字数据
            loadBaziData();
            
            // 初始化标签切换
            initTabSwitching();
            
            // 初始化生肖互动游戏
            initZodiacGame();
        });
        
        function initTabSwitching() {
            // 排行榜标签切换
            document.querySelectorAll('.ranking-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // 移除所有active类
                    document.querySelectorAll('.ranking-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.ranking-tab-content').forEach(c => c.classList.remove('active'));
                    
                    // 添加active类到当前标签和对应内容
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(`${tabId}-ranking`).classList.add('active');
                });
            });
            
            // 能量预测标签切换
            document.querySelectorAll('.forecast-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // 移除所有active类
                    document.querySelectorAll('.forecast-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.forecast-tab-content').forEach(c => c.classList.remove('active'));
                    
                    // 添加active类到当前标签和对应内容
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(`${tabId}-forecast`).classList.add('active');
                });
            });
        }
        
        function loadBaziData() {
            // 2025年生肖排行榜数据
            const zodiacRankings = {
                overall: [
                    {name: "snake", score: 95, desc: "2025年蛇年为本命年，但得'天解'吉星相助，运势强劲"},
                    {name: "ox", score: 90, desc: "三合太岁，贵人运旺盛，事业财运双丰收"},
                    {name: "rooster", score: 88, desc: "'紫微'、'龙德'吉星高照，事业突破良机"},
                    {name: "rat", score: 85, desc: "财运亨通，投资理财收益可观"},
                    {name: "tiger", score: 82, desc: "'太阳'吉星入命，男性运势更佳"},
                    {name: "horse", score: 80, desc: "'驿马'星动，适合开拓外地市场"},
                    {name: "rabbit", score: 78, desc: "平稳发展，需注意人际关系"},
                    {name: "dragon", score: 75, desc: "小有波折，但终能化解"},
                    {name: "pig", score: 72, desc: "'孤辰'入命，需注意感情维系"},
                    {name: "dog", score: 70, desc: "'劫煞'影响，财务需谨慎"},
                    {name: "monkey", score: 68, desc: "'病符'星现，健康需留意"},
                    {name: "sheep", score: 65, desc: "冲太岁，运势起伏较大"}
                ],
                wealth: [
                    {name: "rat", score: 95, desc: "'金匮'财星高照，正偏财皆旺"},
                    {name: "ox", score: 90, desc: "三合太岁带动财库，收入稳定增长"},
                    {name: "snake", score: 88, desc: "本命年但得'八座'财星，投资眼光独到"},
                    {name: "rooster", score: 85, desc: "'龙德'带来贵人财，合作生财"},
                    {name: "tiger", score: 82, desc: "'太阳'照耀，男性财运更佳"},
                    {name: "horse", score: 80, desc: "'驿马'带动远方财，适合跨地域投资"},
                    {name: "rabbit", score: 78, desc: "正财稳定，偏财谨慎"},
                    {name: "dragon", score: 75, desc: "财运平稳，宜储蓄不宜投机"},
                    {name: "pig", score: 72, desc: "'小耗'星现，注意开支控制"},
                    {name: "dog", score: 68, desc: "'劫煞'影响，谨防破财"},
                    {name: "monkey", score: 65, desc: "财务压力大，需量入为出"},
                    {name: "sheep", score: 60, desc: "冲太岁财运波动，保守为宜"}
                ],
                career: [
                    {name: "rooster", score: 95, desc: "'紫微'、'龙德'双星拱照，晋升机会大"},
                    {name: "ox", score: 92, desc: "三合贵人运强，团队协作顺畅"},
                    {name: "snake", score: 90, desc: "本命年但得'将星'助力，领导才能凸显"},
                    {name: "tiger", score: 88, desc: "'太阳'照耀，男性事业更顺利"},
                    {name: "rat", score: 85, desc: "'文昌'入命，创意类工作表现突出"},
                    {name: "horse", score: 82, desc: "'驿马'星动，适合开拓新市场"},
                    {name: "dragon", score: 80, desc: "事业平稳，需主动争取机会"},
                    {name: "rabbit", score: 78, desc: "'寡宿'影响，职场人际关系需留意"},
                    {name: "pig", score: 75, desc: "事业平淡期，适合进修提升"},
                    {name: "dog", score: 72, desc: "职场竞争激烈，需保持耐心"},
                    {name: "monkey", score: 70, desc: "'病符'影响，工作压力大"},
                    {name: "sheep", score: 65, desc: "冲太岁事业变动多，需灵活应对"}
                ],
                love: [
                    {name: "rooster", score: 95, desc: "'红鸾'星动，单身者易遇良缘"},
                    {name: "rabbit", score: 90, desc: "'天喜'桃花旺，感情甜蜜"},
                    {name: "horse", score: 88, desc: "魅力提升，异性缘佳"},
                    {name: "ox", score: 85, desc: "三合太岁，感情稳定和谐"},
                    {name: "tiger", score: 82, desc: "'太阳'照耀，男性感情运佳"},
                    {name: "rat", score: 80, desc: "平淡中见真情，需多沟通"},
                    {name: "snake", score: 78, desc: "本命年感情波动，需多包容"},
                    {name: "dragon", score: 75, desc: "小摩擦增多，需加强理解"},
                    {name: "pig", score: 72, desc: "'孤辰'入命，易感孤独"},
                    {name: "monkey", score: 70, desc: "感情复杂，需理清思绪"},
                    {name: "dog", score: 68, desc: "感情投入不足，需多关注伴侣"},
                    {name: "sheep", score: 65, desc: "冲太岁感情易生变，需用心经营"}
                ],
                health: [
                    {name: "ox", score: 95, desc: "三合太岁，体质强健"},
                    {name: "tiger", score: 92, desc: "'太阳'护佑，精力充沛"},
                    {name: "rat", score: 90, desc: "整体健康良好，注意作息"},
                    {name: "horse", score: 88, desc: "活力十足，注意交通安全"},
                    {name: "rooster", score: 85, desc: "健康平稳，注意呼吸道"},
                    {name: "rabbit", score: 82, desc: "情绪影响健康，需放松"},
                    {name: "dragon", score: 80, desc: "小病小痛，及时调理"},
                    {name: "snake", score: 78, desc: "本命年健康波动，定期检查"},
                    {name: "pig", score: 75, desc: "肠胃敏感，饮食注意"},
                    {name: "dog", score: 72, desc: "劳累过度，需适当休息"},
                    {name: "monkey", score: 68, desc: "'病符'星现，预防旧疾复发"},
                    {name: "sheep", score: 65, desc: "冲太岁健康欠佳，全面调理"}
                ]
            };
            
            // 更新生肖排行榜
            updateZodiacRankings(zodiacRankings);
            
            // 能量预测数据
            const energyForecast = {
                year: {
                    desc: "2025乙巳蛇年，五行属木火，整体能量呈波浪式上升。春季(2-4月)木旺火相，能量平稳；夏季(5-7月)火旺土相，能量达到高峰；秋季(8-10月)金旺水相，能量回落；冬季(11-1月)水旺木相，能量平稳回升。",
                    data: [65, 70, 75, 80, 85, 90, 92, 88, 82, 78, 75, 70]
                },
                month: {
                    desc: "本月五行能量分布：木30%，火25%，土20%，金15%，水10%。上旬(1-10日)木火旺，适合开展新项目；中旬(11-20日)土金旺，宜巩固成果；下旬(21-31日)水火旺，需注意情绪管理。",
                    data: [70, 72, 75, 78, 80, 82, 85, 82, 80, 78, 75, 72, 70, 68, 65, 68, 70, 72, 75, 78, 80, 82, 85, 88, 85, 82, 80, 78, 75, 72, 70]
                },
                week: {
                    desc: "本周每日五行能量变化：周一(水旺)、周二(木旺)、周三(火旺)、周四(土旺)、周五(金旺)、周六(水旺)、周日(木旺)。周三能量最高，适合重要决策；周五能量最低，宜处理常规事务。",
                    data: [70, 80, 90, 75, 65, 70, 80]
                }
            };
            
            // 更新能量预测
            updateEnergyForecast(energyForecast);
        }
        
        function updateZodiacRankings(rankings) {
            // 更新所有排行榜
            updateRankingList('overall-list', rankings.overall);
            updateRankingList('wealth-list', rankings.wealth);
            updateRankingList('career-list', rankings.career);
            updateRankingList('love-list', rankings.love);
            updateRankingList('health-list', rankings.health);
        }
        
        function updateRankingList(listId, data) {
            const list = document.getElementById(listId);
            list.innerHTML = '';
            
            data.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'ranking-item';
                
                const rankClass = index < 3 ? 'top-rank' : '';
                
                div.innerHTML = `
                    <div class="ranking-rank ${rankClass}">${index + 1}</div>
                    <div class="ranking-zodiac">
                        <span class="zodiac-icon zodiac-${item.name}" title="${zodiacIcons[item.name].name}">
                            <img src="${zodiacIcons[item.name].image}" alt="${zodiacIcons[item.name].name}">
                        </span>
                    </div>
                    <div class="ranking-score">
                        <div class="score-bar" style="width: ${item.score}%"></div>
                        <span class="score-value">${item.score}</span>
                    </div>
                    <div class="ranking-desc">${item.desc}</div>
                `;
                
                list.appendChild(div);
            });
        }
        
        function updateEnergyForecast(forecast) {
            // 更新年度能量预测
            document.getElementById('year-energy-desc').textContent = forecast.year.desc;
            drawEnergyGraph('year-energy-graph', forecast.year.data, '月');
            
            // 更新月度能量预测
            document.getElementById('month-energy-desc').textContent = forecast.month.desc;
            drawEnergyGraph('month-energy-graph', forecast.month.data, '日');
            
            // 更新周能量预测
            document.getElementById('week-energy-desc').textContent = forecast.week.desc;
            drawEnergyGraph('week-energy-graph', forecast.week.data, '天');
        }
        
        function drawEnergyGraph(elementId, data, unit) {
            const container = document.getElementById(elementId);
            container.innerHTML = '';
            
            const maxValue = Math.max(...data);
            const graphHeight = 150;
            
            data.forEach((value, index) => {
                const bar = document.createElement('div');
                bar.className = 'energy-bar';
                
                const barHeight = (value / maxValue) * graphHeight;
                bar.style.height = `${barHeight}px`;
                
                const label = document.createElement('div');
                label.className = 'energy-label';
                label.textContent = `${index + 1}${unit}`;
                
                const valueDisplay = document.createElement('div');
                valueDisplay.className = 'energy-value';
                valueDisplay.textContent = value;
                
                bar.appendChild(valueDisplay);
                
                const barContainer = document.createElement('div');
                barContainer.className = 'energy-bar-container';
                barContainer.appendChild(bar);
                barContainer.appendChild(label);
                
                container.appendChild(barContainer);
            });
        }
        
        function initZodiacGame() {
            const zodiacs = Object.keys(zodiacIcons);
            const userZodiac = document.getElementById('user-zodiac');
            const targetZodiac = document.getElementById('target-zodiac');
            
            // 创建生肖选择器
            zodiacs.forEach(zodiac => {
                // 用户生肖选择
                const userDiv = document.createElement('div');
                userDiv.className = `zodiac-option zodiac-${zodiac}`;
                userDiv.innerHTML = `<img src="${zodiacIcons[zodiac].image}" alt="${zodiacIcons[zodiac].name}" title="${zodiacIcons[zodiac].name}">`;
                userDiv.addEventListener('click', function() {
                    document.querySelectorAll('#user-zodiac .zodiac-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
                userZodiac.appendChild(userDiv);
                
                // 目标生肖选择
                const targetDiv = document.createElement('div');
                targetDiv.className = `zodiac-option zodiac-${zodiac}`;
                targetDiv.innerHTML = `<img src="${zodiacIcons[zodiac].image}" alt="${zodiacIcons[zodiac].name}" title="${zodiacIcons[zodiac].name}">`;
                targetDiv.addEventListener('click', function() {
                    document.querySelectorAll('#target-zodiac .zodiac-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
                targetZodiac.appendChild(targetDiv);
            });
            
            // 设置默认选择
            userZodiac.children[0].classList.add('selected');
            targetZodiac.children[1].classList.add('selected');
            
            // 测试契合度按钮
            document.getElementById('check-compatibility').addEventListener('click', function() {
                const userSelected = document.querySelector('#user-zodiac .selected img').alt;
                const targetSelected = document.querySelector('#target-zodiac .selected img').alt;
                
                const userZodiacName = Object.keys(zodiacIcons).find(key => zodiacIcons[key].name === userSelected);
                const targetZodiacName = Object.keys(zodiacIcons).find(key => zodiacIcons[key].name === targetSelected);
                
                if (userZodiacName === targetZodiacName) {
                    showCompatibilityResult("同一生肖，契合度100%！你们有相似的思维方式和行为模式，容易理解彼此。");
                    return;
                }
                
                // 基于三合六合的契合度计算
                const compatibilityGroups = {
                    // 三合生肖组
                    "rat": ["dragon", "monkey"],
                    "ox": ["snake", "rooster"],
                    "tiger": ["horse", "dog"],
                    "rabbit": ["sheep", "pig"],
                    // 六合生肖对
                    "rat": ["ox"],
                    "tiger": ["pig"],
                    "rabbit": ["dog"],
                    "dragon": ["rooster"],
                    "snake": ["monkey"],
                    "horse": ["sheep"]
                };
                
                let score = 60;
                let description = "你们之间相处需要更多理解和包容。";
                
                // 检查三合关系
                if ((compatibilityGroups[userZodiacName] && compatibilityGroups[userZodiacName].includes(targetZodiacName)) ||
                    (compatibilityGroups[targetZodiacName] && compatibilityGroups[targetZodiacName].includes(userZodiacName))) {
                    score = 90;
                    description = "你们是三合生肖，天生默契度高，合作顺利！";
                } 
                // 检查六合关系
                else if ((compatibilityGroups[userZodiacName] && compatibilityGroups[userZodiacName][0] === targetZodiacName) ||
                         (compatibilityGroups[targetZodiacName] && compatibilityGroups[targetZodiacName][0] === userZodiacName)) {
                    score = 95;
                    description = "你们是六合生肖，最佳拍档，互相促进！";
                }
                // 检查相冲关系
                else if (isConflict(userZodiacName, targetZodiacName)) {
                    score = 40;
                    description = "你们生肖相冲，容易产生矛盾，需要更多包容。";
                }
                // 检查相害关系
                else if (isHarm(userZodiacName, targetZodiacName)) {
                    score = 50;
                    description = "你们生肖相害，相处需注意方式方法。";
                }
                // 一般关系
                else {
                    score = 70;
                    description = "你们相处融洽，有不错的默契和互补性。";
                }
                
                showCompatibilityResult(`生肖${zodiacIcons[userZodiacName].name}和${zodiacIcons[targetZodiacName].name}的契合度是${score}%！${description}`);
            });
        }
        
        // 生肖相冲关系
        function isConflict(zodiac1, zodiac2) {
            const conflicts = {
                "rat": "horse",
                "ox": "sheep",
                "tiger": "monkey",
                "rabbit": "rooster",
                "dragon": "dog",
                "snake": "pig"
            };
            return conflicts[zodiac1] === zodiac2 || conflicts[zodiac2] === zodiac1;
        }
        
        // 生肖相害关系
        function isHarm(zodiac1, zodiac2) {
            const harms = {
                "rat": "sheep",
                "ox": "horse",
                "tiger": "snake",
                "rabbit": "dragon",
                "monkey": "pig",
                "rooster": "dog"
            };
            return harms[zodiac1] === zodiac2 || harms[zodiac2] === zodiac1;
        }
        
        function showCompatibilityResult(text) {
            const resultElement = document.getElementById('compatibility-result');
            resultElement.textContent = text;
            resultElement.style.display = 'block';
            resultElement.style.animation = 'none';
            void resultElement.offsetWidth;
            resultElement.style.animation = 'fadeIn 0.5s ease-out';
        }
    </script>
</body>
</html>
