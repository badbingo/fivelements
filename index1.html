<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>八字命理 - 趋吉避凶之道 | 麦八字教学网</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/index.css">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2NHJXGKS0Y"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-2NHJXGKS0Y');
    </script>
    <style>
        /* 生肖图标样式 */
        .zodiac-icon {
            font-family: 'Noto Serif SC', serif;
            /* 更改图标大小 */
            width: 40px;  /* 调整为合适大小 */
            height: 40px; /* 调整为合适大小 */
            display: inline-block;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }

        /* 生肖对应的颜色（可保留，用于边框或其他元素） */
        .zodiac-rat { background-image: url('https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f400.svg'); }
        .zodiac-ox { background-image: url('https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f402.svg'); }
        .zodiac-tiger { background-image: url('https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f405.svg'); }
        .zodiac-rabbit { background-image: url('https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f407.svg'); }
        .zodiac-dragon { background-image: url('https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f409.svg'); }
        .zodiac-snake { background-image: url('https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f40d.svg'); }
        .zodiac-horse { background-image: url('https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f40e.svg'); }
        .zodiac-sheep { background-image: url('https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f411.svg'); }
        .zodiac-monkey { background-image: url('https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f412.svg'); }
        .zodiac-rooster { background-image: url('https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f413.svg'); }
        .zodiac-dog { background-image: url('https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f415.svg'); }
        .zodiac-pig { background-image: url('https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f437.svg'); }
    </style>
</head>
<body>
    <!-- 星空背景 -->
    <div class="stars" id="stars"></div>
    
    <!-- 开场英雄区域 -->
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">探索八字命理的奥秘</h1>
            <p class="hero-subtitle">了解自己的命运轨迹，掌握改变人生的钥匙</p>
            
            <div class="bazi-elements">
                <div class="element">木</div>
                <div class="element">火</div>
                <div class="element">土</div>
                <div class="element">金</div>
                <div class="element">水</div>
            </div>
            
            <a href="seven.html" class="cta-button">开始探索命理奥秘</a>
            
            <p class="hero-subtitle" style="font-size: 1.2rem; max-width: 800px; margin: 0 auto;">
                八字命理不仅是预测工具，更是了解自我、把握机遇的智慧。<br>
                通过分析五行生克、十神关系，我们可以预见人生起伏，<br>
                在关键时刻做出明智选择，实现"我命由我不由天"的人生境界。
            </p>
            
            <p class="destiny-quote">
                知命而不认命，顺势而为，逆天改运
            </p>
        </div>
    </section>

    <!-- 新增内容区域 -->
    <section class="content-section">
        <!-- 今日运势概览 -->
        <div class="dashboard-container">
            <div class="dashboard-header">
                <h2><i class="fas fa-calendar-day"></i> 今日运势概览</h2>
                <div class="date-display" id="current-date"></div>
            </div>
            
            <div class="dashboard-grid">
                <!-- 今日能量 -->
                <div class="dashboard-card energy-card">
                    <div class="card-header">
                        <i class="fas fa-bolt"></i>
                        <h3>今日能量指数</h3>
                    </div>
                    <div class="energy-meter">
                        <div class="energy-level" id="today-energy"></div>
                        <div class="energy-labels">
                            <span>低</span>
                            <span>中</span>
                            <span>高</span>
                        </div>
                    </div>
                    <div class="energy-desc" id="energy-desc"></div>
                </div>
                
                <!-- 宜忌 -->
                <div class="dashboard-card suitable-card">
                    <div class="card-header">
                        <i class="fas fa-thumbs-up"></i>
                        <h3>今日宜</h3>
                    </div>
                    <ul class="suitable-list" id="today-suitable"></ul>
                </div>
                
                <div class="dashboard-card avoid-card">
                    <div class="card-header">
                        <i class="fas fa-thumbs-down"></i>
                        <h3>今日忌</h3>
                    </div>
                    <ul class="avoid-list" id="today-avoid"></ul>
                </div>
                
                <!-- 幸运生肖 -->
                <div class="dashboard-card lucky-zodiac">
                    <div class="card-header">
                        <i class="fas fa-star"></i>
                        <h3>今日幸运生肖</h3>
                    </div>
                    <div class="zodiac-icons" id="lucky-zodiacs">
                        <!-- 替换后的图标 -->
                        <div class="zodiac-icon zodiac-rat" title="鼠"></div>
                        <div class="zodiac-icon zodiac-dragon" title="龙"></div>
                        <div class="zodiac-icon zodiac-monkey" title="猴"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 生肖运势排行榜 -->
        <div class="ranking-container">
            <h2><i class="fas fa-trophy"></i> 2025年生肖运势排行榜</h2>
            
            <div class="ranking-tabs">
                <button class="ranking-tab active" data-tab="overall">综合运势</button>
                <button class="ranking-tab" data-tab="wealth">财运排行</button>
                <button class="ranking-tab" data-tab="career">事业排行</button>
                <button class="ranking-tab" data-tab="love">感情排行</button>
                <button class="ranking-tab" data-tab="health">健康排行</button>
            </div>
            
            <div class="ranking-content">
                <div class="ranking-tab-content active" id="overall-ranking">
                    <div class="ranking-list" id="overall-list"></div>
                </div>
                <div class="ranking-tab-content" id="wealth-ranking">
                    <div class="ranking-list" id="wealth-list"></div>
                </div>
                <div class="ranking-tab-content" id="career-ranking">
                    <div class="ranking-list" id="career-list"></div>
                </div>
                <div class="ranking-tab-content" id="love-ranking">
                    <div class="ranking-list" id="love-list"></div>
                </div>
                <div class="ranking-tab-content" id="health-ranking">
                    <div class="ranking-list" id="health-list"></div>
                </div>
            </div>
        </div>
        
        <!-- 本月生肖运势建议 -->
        <div class="monthly-zodiac-container">
            <h2><i class="fas fa-calendar-alt"></i> 本月生肖运势建议</h2>
            <div class="zodiac-grid" id="monthly-zodiac-advice">
                <!-- 示例替换 -->
                <div class="zodiac-advice-card">
                    <div class="zodiac-header">
                        <div class="zodiac-icon zodiac-rat" title="鼠"></div>
                    </div>
                    <div class="zodiac-advice">本月财运亨通，但需注意健康，避免过度劳累。事业上有贵人相助，把握机会展现才能。</div>
                </div>
                <div class="zodiac-advice-card">
                    <div class="zodiac-header">
                        <div class="zodiac-icon zodiac-ox" title="牛"></div>
                    </div>
                    <div class="zodiac-advice">本月工作压力大，需保持耐心。感情方面需多沟通，避免误会积累。健康注意肠胃问题。</div>
                </div>
                <!-- 依次类推，所有生肖都做同样替换 -->
            </div>
        </div>
        
        <!-- 能量预测 -->
        <div class="energy-forecast-container">
            <h2><i class="fas fa-chart-line"></i> 能量预测</h2>
            
            <div class="forecast-tabs">
                <button class="forecast-tab active" data-tab="year">年度能量</button>
                <button class="forecast-tab" data-tab="month">本月能量</button>
                <button class="forecast-tab" data-tab="week">本周能量</button>
            </div>
            
            <div class="forecast-content">
                <div class="forecast-tab-content active" id="year-forecast">
                    <div class="forecast-desc" id="year-energy-desc"></div>
                    <div class="energy-graph" id="year-energy-graph"></div>
                </div>
                <div class="forecast-tab-content" id="month-forecast">
                    <div class="forecast-desc" id="month-energy-desc"></div>
                    <div class="energy-graph" id="month-energy-graph"></div>
                </div>
                <div class="forecast-tab-content" id="week-forecast">
                    <div class="forecast-desc" id="week-energy-desc"></div>
                    <div class="energy-graph" id="week-energy-graph"></div>
                </div>
            </div>
        </div>
        
        <!-- 生肖互动小游戏 -->
        <div class="zodiac-game-container">
            <h2><i class="fas fa-gamepad"></i> 生肖互动小游戏</h2>
            <div class="game-content">
                <div class="game-intro">
                    <p>测试你与不同生肖的契合度，看看哪些生肖是你的贵人！</p>
                </div>
                <div class="game-area">
                    <div class="user-zodiac-selector">
                        <h3>选择你的生肖</h3>
                        <div class="zodiac-selector" id="user-zodiac">
                            <div class="zodiac-option zodiac-rat" title="鼠"></div>
                            <div class="zodiac-option zodiac-ox" title="牛"></div>
                            <div class="zodiac-option zodiac-tiger" title="虎"></div>
                            <div class="zodiac-option zodiac-rabbit" title="兔"></div>
                            <div class="zodiac-option zodiac-dragon" title="龙"></div>
                            <div class="zodiac-option zodiac-snake" title="蛇"></div>
                            <div class="zodiac-option zodiac-horse" title="马"></div>
                            <div class="zodiac-option zodiac-sheep" title="羊"></div>
                            <div class="zodiac-option zodiac-monkey" title="猴"></div>
                            <div class="zodiac-option zodiac-rooster" title="鸡"></div>
                            <div class="zodiac-option zodiac-dog" title="狗"></div>
                            <div class="zodiac-option zodiac-pig" title="猪"></div>
                        </div>
                    </div>
                    <div class="target-zodiac-selector">
                        <h3>选择目标生肖</h3>
                        <div class="zodiac-selector" id="target-zodiac">
                            <div class="zodiac-option zodiac-rat" title="鼠"></div>
                            <div class="zodiac-option zodiac-ox" title="牛"></div>
                            <div class="zodiac-option zodiac-tiger" title="虎"></div>
                            <div class="zodiac-option zodiac-rabbit" title="兔"></div>
                            <div class="zodiac-option zodiac-dragon" title="龙"></div>
                            <div class="zodiac-option zodiac-snake" title="蛇"></div>
                            <div class="zodiac-option zodiac-horse" title="马"></div>
                            <div class="zodiac-option zodiac-sheep" title="羊"></div>
                            <div class="zodiac-option zodiac-monkey" title="猴"></div>
                            <div class="zodiac-option zodiac-rooster" title="鸡"></div>
                            <div class="zodiac-option zodiac-dog" title="狗"></div>
                            <div class="zodiac-option zodiac-pig" title="猪"></div>
                        </div>
                    </div>
                    <button class="game-button" id="check-compatibility">测试契合度</button>
                    <div class="game-result" id="compatibility-result"></div>
                </div>
            </div>
        </div>
        
        <!-- 每日命理小知识 -->
        <div class="knowledge-container">
            <h2><i class="fas fa-lightbulb"></i> 每日命理小知识</h2>
            <div class="knowledge-card">
                <div class="knowledge-content" id="daily-knowledge"></div>
                <div class="knowledge-source">每日更新 · 源自传统命理智慧</div>
            </div>
        </div>
    </section>
    
    <script src="js/lunar.js"></script>
    <script>


        // 创建星空背景
        document.addEventListener('DOMContentLoaded', function() {
            const starsContainer = document.getElementById('stars');
            const starCount = 200;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                // 随机大小 (1-3px)
                const size = Math.random() * 2 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                // 随机位置
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                
                // 随机闪烁时间 (2-5秒)
                star.style.setProperty('--duration', `${Math.random() * 3 + 2}s`);
                
                starsContainer.appendChild(star);
            }
            
            // 五行元素交互效果
            const elements = document.querySelectorAll('.element');
            
            elements.forEach((el) => {
                // 点击效果
                el.addEventListener('click', function() {
                    // 创建波纹效果
                    const ripple = document.createElement('span');
                    ripple.classList.add('ripple');
                    
                    // 设置波纹位置
                    const rect = this.getBoundingClientRect();
                    const x = event.clientX - rect.left;
                    const y = event.clientY - rect.top;
                    
                    ripple.style.left = `${x}px`;
                    ripple.style.top = `${y}px`;
                    
                    this.appendChild(ripple);
                    
                    // 动画结束后移除
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                    
                    // 弹跳效果
                    this.style.animation = 'none';
                    void this.offsetWidth; // 触发重绘
                    this.style.animation = 'elementClick 0.5s ease-out';
                });
                
                // 鼠标悬停时轻微抖动
                el.addEventListener('mouseover', function() {
                    this.style.animation = 'float 3s ease-in-out infinite';
                });
                
                // 鼠标移出恢复原状
                el.addEventListener('mouseout', function() {
                    this.style.animation = 'float 6s ease-in-out infinite';
                });
            });
            
            // 按钮点击波纹效果
            const buttons = document.querySelectorAll('.cta-button');
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    // 移除之前的波纹
                    const oldRipple = this.querySelector('.ripple');
                    if (oldRipple) {
                        oldRipple.remove();
                    }
                    
                    // 创建新的波纹
                    const ripple = document.createElement('span');
                    ripple.classList.add('ripple');
                    
                    // 设置波纹位置
                    const rect = this.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    ripple.style.left = `${x}px`;
                    ripple.style.top = `${y}px`;
                    
                    this.appendChild(ripple);
                    
                    // 动画结束后移除
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });
            
            // 元素循环发光效果
            function elementGlow() {
                elements.forEach((el, index) => {
                    setTimeout(() => {
                        el.style.boxShadow = '0 0 40px rgba(255, 255, 255, 0.8)';
                        setTimeout(() => {
                            el.style.boxShadow = '0 0 30px rgba(255, 255, 255, 0.3)';
                        }, 1000);
                    }, index * 300);
                });
                
                setTimeout(elementGlow, 3000);
            }
            
            // 启动循环发光效果
            setTimeout(elementGlow, 2000);
            
            // 加载八字数据
            loadBaziData();
            
            // 排行榜标签切换
            setupTabSwitching('.ranking-tab', '.ranking-tab-content');
            
            // 能量预测标签切换
            setupTabSwitching('.forecast-tab', '.forecast-tab-content');
            
            // 初始化生肖互动游戏
            initZodiacGame();
        });
        
        function setupTabSwitching(tabSelector, contentSelector) {
            const tabs = document.querySelectorAll(tabSelector);
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // 移除所有active类
                    document.querySelectorAll(tabSelector).forEach(t => t.classList.remove('active'));
                    document.querySelectorAll(contentSelector).forEach(c => c.classList.remove('active'));
                    
                    // 添加active类到当前标签和对应内容
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(`${tabId}-${contentSelector.replace('.', '')}`).classList.add('active');
                });
            });
        }
        
        function loadBaziData() {
            // 获取当前日期
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const day = now.getDate();
            
            // 显示当前日期
            document.getElementById('current-date').textContent = `${year}年${month}月${day}日`;
            
            // 模拟从lunar.js获取数据
            // 实际使用时替换为真实的lunar.js API调用
            
            // 今日运势数据
            const todayData = {
                energy: 75, // 0-100
                energyDesc: "今日能量中等偏上，适合处理重要事务，但下午3-5点能量较低，建议避免重大决策。",
                suitable: ["签约", "搬家", "投资", "社交", "学习新技能"],
                avoid: ["借贷", "争吵", "远行", "手术", "重大变更"],
                luckyZodiacs: ["rat", "dragon", "monkey"]
            };
            
            // 更新今日运势
            updateTodayFortune(todayData);
            
            // 2025年生肖排行榜数据（基于五行生克和流年运势推算）
            const zodiacRankings = {
                overall: [
                    {name: "snake", score: 95, desc: "2025年蛇年为本命年，但得'天解'吉星相助，运势强劲"},
                    {name: "ox", score: 90, desc: "三合太岁，贵人运旺盛，事业财运双丰收"},
                    {name: "rooster", score: 88, desc: "'紫微'、'龙德'吉星高照，事业突破良机"},
                    {name: "rat", score: 85, desc: "财运亨通，投资理财收益可观"},
                    {name: "tiger", score: 82, desc: "'太阳'吉星入命，男性运势更佳"},
                    {name: "horse", score: 80, desc: "'驿马'星动，适合开拓外地市场"},
                    {name: "rabbit", score: 78, desc: "平稳发展，需注意人际关系"},
                    {name: "dragon", score: 75, desc: "小有波折，但终能化解"},
                    {name: "pig", score: 72, desc: "'孤辰'入命，需注意感情维系"},
                    {name: "dog", score: 70, desc: "'劫煞'影响，财务需谨慎"},
                    {name: "monkey", score: 68, desc: "'病符'星现，健康需留意"},
                    {name: "sheep", score: 65, desc: "冲太岁，运势起伏较大"}
                ],
                wealth: [
                    {name: "rat", score: 95, desc: "'金匮'财星高照，正偏财皆旺"},
                    {name: "ox", score: 90, desc: "三合太岁带动财库，收入稳定增长"},
                    {name: "snake", score: 88, desc: "本命年但得'八座'财星，投资眼光独到"},
                    {name: "rooster", score: 85, desc: "'龙德'带来贵人财，合作生财"},
                    {name: "tiger", score: 82, desc: "'太阳'照耀，男性财运更佳"},
                    {name: "horse", score: 80, desc: "'驿马'带动远方财，适合跨地域投资"},
                    {name: "rabbit", score: 78, desc: "正财稳定，偏财谨慎"},
                    {name: "dragon", score: 75, desc: "财运平稳，宜储蓄不宜投机"},
                    {name: "pig", score: 72, desc: "'小耗'星现，注意开支控制"},
                    {name: "dog", score: 68, desc: "'劫煞'影响，谨防破财"},
                    {name: "monkey", score: 65, desc: "财务压力大，需量入为出"},
                    {name: "sheep", score: 60, desc: "冲太岁财运波动，保守为宜"}
                ],
                career: [
                    {name: "rooster", score: 95, desc: "'紫微'、'龙德'双星拱照，晋升机会大"},
                    {name: "ox", score: 92, desc: "三合贵人运强，团队协作顺畅"},
                    {name: "snake", score: 90, desc: "本命年但得'将星'助力，领导才能凸显"},
                    {name: "tiger", score: 88, desc: "'太阳'照耀，男性事业更顺利"},
                    {name: "rat", score: 85, desc: "'文昌'入命，创意类工作表现突出"},
                    {name: "horse", score: 82, desc: "'驿马'星动，适合开拓新市场"},
                    {name: "dragon", score: 80, desc: "事业平稳，需主动争取机会"},
                    {name: "rabbit", score: 78, desc: "'寡宿'影响，职场人际关系需留意"},
                    {name: "pig", score: 75, desc: "事业平淡期，适合进修提升"},
                    {name: "dog", score: 72, desc: "职场竞争激烈，需保持耐心"},
                    {name: "monkey", score: 70, desc: "'病符'影响，工作压力大"},
                    {name: "sheep", score: 65, desc: "冲太岁事业变动多，需灵活应对"}
                ],
                love: [
                    {name: "rooster", score: 95, desc: "'红鸾'星动，单身者易遇良缘"},
                    {name: "rabbit", score: 90, desc: "'天喜'桃花旺，感情甜蜜"},
                    {name: "horse", score: 88, desc: "魅力提升，异性缘佳"},
                    {name: "ox", score: 85, desc: "三合太岁，感情稳定和谐"},
                    {name: "tiger", score: 82, desc: "'太阳'照耀，男性感情运佳"},
                    {name: "rat", score: 80, desc: "平淡中见真情，需多沟通"},
                    {name: "snake", score: 78, desc: "本命年感情波动，需多包容"},
                    {name: "dragon", score: 75, desc: "小摩擦增多，需加强理解"},
                    {name: "pig", score: 72, desc: "'孤辰'入命，易感孤独"},
                    {name: "monkey", score: 70, desc: "感情复杂，需理清思绪"},
                    {name: "dog", score: 68, desc: "感情投入不足，需多关注伴侣"},
                    {name: "sheep", score: 65, desc: "冲太岁感情易生变，需用心经营"}
                ],
                health: [
                    {name: "ox", score: 95, desc: "三合太岁，体质强健"},
                    {name: "tiger", score: 92, desc: "'太阳'护佑，精力充沛"},
                    {name: "rat", score: 90, desc: "整体健康良好，注意作息"},
                    {name: "horse", score: 88, desc: "活力十足，注意交通安全"},
                    {name: "rooster", score: 85, desc: "健康平稳，注意呼吸道"},
                    {name: "rabbit", score: 82, desc: "情绪影响健康，需放松"},
                    {name: "dragon", score: 80, desc: "小病小痛，及时调理"},
                    {name: "snake", score: 78, desc: "本命年健康波动，定期检查"},
                    {name: "pig", score: 75, desc: "肠胃敏感，饮食注意"},
                    {name: "dog", score: 72, desc: "劳累过度，需适当休息"},
                    {name: "monkey", score: 68, desc: "'病符'星现，预防旧疾复发"},
                    {name: "sheep", score: 65, desc: "冲太岁健康欠佳，全面调理"}
                ]
            };
            
            // 更新生肖排行榜
            updateZodiacRankings(zodiacRankings);
            
            // 本月生肖运势建议
            const monthlyAdvice = [
                {zodiac: "rat", advice: "本月财运亨通，但需注意健康，避免过度劳累。事业上有贵人相助，把握机会展现才能。"},
                {zodiac: "ox", advice: "本月工作压力大，需保持耐心。感情方面需多沟通，避免误会积累。健康注意肠胃问题。"},
                {zodiac: "tiger", advice: "本月事业运上升，有晋升机会。财运平稳，宜储蓄不宜投机。感情上需多花时间陪伴伴侣。"},
                {zodiac: "rabbit", advice: "本月变动较多，需灵活应对。财运起伏大，谨慎投资。健康注意睡眠质量。"},
                {zodiac: "dragon", advice: "本月运势良好，各方面顺利。事业有突破，财运亨通。感情甜蜜，单身者易遇良缘。"},
                {zodiac: "snake", advice: "本月小有波折，但终能化解。工作上需注意细节。财运一般，宜守不宜攻。健康注意呼吸道。"},
                {zodiac: "horse", advice: "本月压力较大，需调整心态。事业上遇到挑战，坚持不懈终有收获。感情需主动沟通。"},
                {zodiac: "sheep", advice: "本月运势低迷，宜保守行事。工作上谨言慎行。财运紧张，避免借贷。健康全面调理。"},
                {zodiac: "monkey", advice: "本月人缘佳，社交活跃。桃花运旺盛，单身者机会多。财运不错，但需节制消费。"},
                {zodiac: "rooster", advice: "本月小人作祟，谨言慎行。工作上避免卷入是非。财运有破财风险，看好钱包。"},
                {zodiac: "dog", advice: "本月平稳发展，按部就班。感情稳定，考虑长远。健康良好，适度运动。"},
                {zodiac: "pig", advice: "本月平淡无奇，等待时机。工作上缺乏突破。财运一般，忌投机。健康注意饮食规律。"}
            ];
            
            // 更新本月运势建议
            updateMonthlyAdvice(monthlyAdvice);
            
            // 能量预测数据（基于五行能量变化周期）
            const energyForecast = {
                year: {
                    desc: "2025乙巳蛇年，五行属木火，整体能量呈波浪式上升。春季(2-4月)木旺火相，能量平稳；夏季(5-7月)火旺土相，能量达到高峰；秋季(8-10月)金旺水相，能量回落；冬季(11-1月)水旺木相，能量平稳回升。",
                    data: [65, 70, 75, 80, 85, 90, 92, 88, 82, 78, 75, 70]
                },
                month: {
                    desc: "本月五行能量分布：木30%，火25%，土20%，金15%，水10%。上旬(1-10日)木火旺，适合开展新项目；中旬(11-20日)土金旺，宜巩固成果；下旬(21-31日)水火旺，需注意情绪管理。",
                    data: [70, 72, 75, 78, 80, 82, 85, 82, 80, 78, 75, 72, 70, 68, 65, 68, 70, 72, 75, 78, 80, 82, 85, 88, 85, 82, 80, 78, 75, 72, 70]
                },
                week: {
                    desc: "本周每日五行能量变化：周一(水旺)、周二(木旺)、周三(火旺)、周四(土旺)、周五(金旺)、周六(水旺)、周日(木旺)。周三能量最高，适合重要决策；周五能量最低，宜处理常规事务。",
                    data: [70, 80, 90, 75, 65, 70, 80]
                }
            };
            
            // 更新能量预测
            updateEnergyForecast(energyForecast);
            
            // 每日命理小知识
            const dailyKnowledge = [
                "2025年为乙巳蛇年，天干乙木，地支巳火，木火相生，整体运势偏向积极向上。",
                "蛇年出生的人2025年值太岁，但得'天解'吉星相助，可化解大部分不利影响。",
                "2025年三合生肖：牛、蛇、鸡，这三个生肖相互配合能增强运势。",
                "2025年冲太岁生肖：猪，需特别注意健康和安全问题。",
                "2025年'紫微'、'龙德'吉星入命生肖：鸡，事业上有突破性发展。",
                "2025年'驿马'星动生肖：马，适合外出发展或开拓新市场。",
                "2025年'金匮'财星入命生肖：鼠，财运亨通，投资理财收益可观。",
                "2025年'太阳'吉星入命生肖：虎，男性运势更佳，事业有贵人相助。",
                "2025年'病符'星现生肖：猴，需特别注意健康问题，预防旧疾复发。",
                "2025年'孤辰'入命生肖：猪，感情上易感孤独，需主动社交拓展人脉。"
            ];
            
            // 更新每日知识
            updateDailyKnowledge(dailyKnowledge);
        }
        
        function updateTodayFortune(data) {
            // 更新今日能量
            document.getElementById('today-energy').style.width = `${data.energy}%`;
            document.getElementById('energy-desc').textContent = data.energyDesc;
            
            // 更新今日宜忌
            const suitableList = document.getElementById('today-suitable');
            const avoidList = document.getElementById('today-avoid');
            
            suitableList.innerHTML = '';
            avoidList.innerHTML = '';
            
            data.suitable.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                suitableList.appendChild(li);
            });
            
            data.avoid.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                avoidList.appendChild(li);
            });
            
            // 更新幸运生肖
            const luckyZodiacs = document.getElementById('lucky-zodiacs');
            luckyZodiacs.innerHTML = '';
            
            data.luckyZodiacs.forEach(zodiac => {
                const span = document.createElement('span');
                span.className = `zodiac-icon zodiac-${zodiac}`;
                span.textContent = zodiacIcons[zodiac].symbol;
                span.title = zodiacIcons[zodiac].name;
                luckyZodiacs.appendChild(span);
            });
        }
        
        function updateZodiacRankings(rankings) {
            // 更新综合运势排行
            updateRankingList('overall-list', rankings.overall);
            updateRankingList('wealth-list', rankings.wealth);
            updateRankingList('career-list', rankings.career);
            updateRankingList('love-list', rankings.love);
            updateRankingList('health-list', rankings.health);
        }
        
        function updateRankingList(listId, data) {
            const list = document.getElementById(listId);
            list.innerHTML = '';
            
            data.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'ranking-item';
                
                const rankClass = index < 3 ? 'top-rank' : '';
                
                div.innerHTML = `
                    <div class="ranking-rank ${rankClass}">${index + 1}</div>
                    <div class="ranking-zodiac">
                        <span class="zodiac-icon zodiac-${item.name}" title="${zodiacIcons[item.name].name}">
                            ${zodiacIcons[item.name].symbol}
                        </span>
                    </div>
                    <div class="ranking-score">
                        <div class="score-bar" style="width: ${item.score}%"></div>
                        <span class="score-value">${item.score}</span>
                    </div>
                    <div class="ranking-desc">${item.desc}</div>
                `;
                
                list.appendChild(div);
            });
        }
        
        function updateMonthlyAdvice(adviceList) {
            const container = document.getElementById('monthly-zodiac-advice');
            container.innerHTML = '';
            
            adviceList.forEach(item => {
                const card = document.createElement('div');
                card.className = 'zodiac-advice-card';
                
                card.innerHTML = `
                    <div class="zodiac-header">
                        <span class="zodiac-icon zodiac-${item.zodiac}" title="${zodiacIcons[item.zodiac].name}">
                            ${zodiacIcons[item.zodiac].symbol}
                        </span>
                        <h3>${zodiacIcons[item.zodiac].name}生肖</h3>
                    </div>
                    <div class="zodiac-advice">${item.advice}</div>
                `;
                
                container.appendChild(card);
            });
        }
        
        function updateEnergyForecast(forecast) {
            // 更新年度能量预测
            document.getElementById('year-energy-desc').textContent = forecast.year.desc;
            drawEnergyGraph('year-energy-graph', forecast.year.data, '月');
            
            // 更新月度能量预测
            document.getElementById('month-energy-desc').textContent = forecast.month.desc;
            drawEnergyGraph('month-energy-graph', forecast.month.data, '日');
            
            // 更新周能量预测
            document.getElementById('week-energy-desc').textContent = forecast.week.desc;
            drawEnergyGraph('week-energy-graph', forecast.week.data, '天');
        }
        
        function drawEnergyGraph(elementId, data, unit) {
            const container = document.getElementById(elementId);
            container.innerHTML = '';
            
            const maxValue = Math.max(...data);
            const graphHeight = 150;
            
            data.forEach((value, index) => {
                const bar = document.createElement('div');
                bar.className = 'energy-bar';
                
                const barHeight = (value / maxValue) * graphHeight;
                bar.style.height = `${barHeight}px`;
                
                const label = document.createElement('div');
                label.className = 'energy-label';
                label.textContent = `${index + 1}${unit}`;
                
                const valueDisplay = document.createElement('div');
                valueDisplay.className = 'energy-value';
                valueDisplay.textContent = value;
                
                bar.appendChild(valueDisplay);
                
                const barContainer = document.createElement('div');
                barContainer.className = 'energy-bar-container';
                barContainer.appendChild(bar);
                barContainer.appendChild(label);
                
                container.appendChild(barContainer);
            });
        }
        
        function updateDailyKnowledge(knowledgeList) {
            const knowledgeElement = document.getElementById('daily-knowledge');
            const today = new Date().getDate();
            const index = today % knowledgeList.length;
            knowledgeElement.textContent = knowledgeList[index];
        }
        
        function initZodiacGame() {
            const zodiacs = Object.keys(zodiacIcons);
            const userZodiac = document.getElementById('user-zodiac');
            const targetZodiac = document.getElementById('target-zodiac');
            
            // 创建生肖选择器
            zodiacs.forEach(zodiac => {
                const div = document.createElement('div');
                div.className = `zodiac-option zodiac-${zodiac}`;
                div.textContent = zodiacIcons[zodiac].symbol;
                div.title = zodiacIcons[zodiac].name;
                div.addEventListener('click', function() {
                    document.querySelectorAll('#user-zodiac .zodiac-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    // 添加高亮效果
                    this.style.transform = 'scale(1.3)';
                    this.style.boxShadow = '0 0 15px rgba(255, 215, 0, 0.7)';
                    this.style.backgroundColor = 'rgba(255, 215, 0, 0.2)';
                });
                userZodiac.appendChild(div);
                
                const div2 = document.createElement('div');
                div2.className = `zodiac-option zodiac-${zodiac}`;
                div2.textContent = zodiacIcons[zodiac].symbol;
                div2.title = zodiacIcons[zodiac].name;
                div2.addEventListener('click', function() {
                    document.querySelectorAll('#target-zodiac .zodiac-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    // 添加高亮效果
                    this.style.transform = 'scale(1.3)';
                    this.style.boxShadow = '0 0 15px rgba(255, 215, 0, 0.7)';
                    this.style.backgroundColor = 'rgba(255, 215, 0, 0.2)';
                });
                targetZodiac.appendChild(div2);
            });
            
            // 设置默认选择
            userZodiac.children[0].classList.add('selected');
            targetZodiac.children[1].classList.add('selected');
            
            // 测试契合度按钮
            document.getElementById('check-compatibility').addEventListener('click', function() {
                const userSelected = document.querySelector('#user-zodiac .selected').textContent;
                const targetSelected = document.querySelector('#target-zodiac .selected').textContent;
                
                const userZodiacName = Object.keys(zodiacIcons).find(key => zodiacIcons[key].symbol === userSelected);
                const targetZodiacName = Object.keys(zodiacIcons).find(key => zodiacIcons[key].symbol === targetSelected);
                
                if (userZodiacName === targetZodiacName) {
                    showCompatibilityResult("同一生肖，契合度100%！你们有相似的思维方式和行为模式，容易理解彼此。");
                    return;
                }
                
                // 基于三合六合的契合度计算
                const compatibilityGroups = {
                    // 三合生肖组
                    "rat": ["dragon", "monkey"],
                    "ox": ["snake", "rooster"],
                    "tiger": ["horse", "dog"],
                    "rabbit": ["sheep", "pig"],
                    // 六合生肖对
                    "rat": ["ox"],
                    "tiger": ["pig"],
                    "rabbit": ["dog"],
                    "dragon": ["rooster"],
                    "snake": ["monkey"],
                    "horse": ["sheep"]
                };
                
                let score = 60;
                let description = "你们之间相处需要更多理解和包容。";
                
                // 检查三合关系
                if ((compatibilityGroups[userZodiacName] && compatibilityGroups[userZodiacName].includes(targetZodiacName)) ||
                    (compatibilityGroups[targetZodiacName] && compatibilityGroups[targetZodiacName].includes(userZodiacName))) {
                    score = 90;
                    description = "你们是三合生肖，天生默契度高，合作顺利！";
                } 
                // 检查六合关系
                else if ((compatibilityGroups[userZodiacName] && compatibilityGroups[userZodiacName][0] === targetZodiacName) ||
                         (compatibilityGroups[targetZodiacName] && compatibilityGroups[targetZodiacName][0] === userZodiacName)) {
                    score = 95;
                    description = "你们是六合生肖，最佳拍档，互相促进！";
                }
                // 检查相冲关系
                else if (isConflict(userZodiacName, targetZodiacName)) {
                    score = 40;
                    description = "你们生肖相冲，容易产生矛盾，需要更多包容。";
                }
                // 检查相害关系
                else if (isHarm(userZodiacName, targetZodiacName)) {
                    score = 50;
                    description = "你们生肖相害，相处需注意方式方法。";
                }
                // 一般关系
                else {
                    score = 70;
                    description = "你们相处融洽，有不错的默契和互补性。";
                }
                
                showCompatibilityResult(`生肖${zodiacIcons[userZodiacName].name}和${zodiacIcons[targetZodiacName].name}的契合度是${score}%！${description}`);
            });
        }
        
        // 生肖相冲关系
        function isConflict(zodiac1, zodiac2) {
            const conflicts = {
                "rat": "horse",
                "ox": "sheep",
                "tiger": "monkey",
                "rabbit": "rooster",
                "dragon": "dog",
                "snake": "pig"
            };
            return conflicts[zodiac1] === zodiac2 || conflicts[zodiac2] === zodiac1;
        }
        
        // 生肖相害关系
        function isHarm(zodiac1, zodiac2) {
            const harms = {
                "rat": "sheep",
                "ox": "horse",
                "tiger": "snake",
                "rabbit": "dragon",
                "monkey": "pig",
                "rooster": "dog"
            };
            return harms[zodiac1] === zodiac2 || harms[zodiac2] === zodiac1;
        }
        
        function showCompatibilityResult(text) {
            const resultElement = document.getElementById('compatibility-result');
            resultElement.textContent = text;
            resultElement.style.display = 'block';
            
            // 添加动画效果
            resultElement.style.animation = 'none';
            void resultElement.offsetWidth;
            resultElement.style.animation = 'fadeIn 0.5s ease-out';
        }
    </script>
    <script src="js/ink.js"></script>
</body>
</html>
