<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>八字命理 - 趋吉避凶之道 | 麦八字教学网</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/index.css">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2NHJXGKS0Y"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-2NHJXGKS0Y');
    </script>
</head>
<body>
    <!-- 星空背景 -->
    <div class="stars" id="stars"></div>
    

    <!-- 开场英雄区域 -->
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">探索八字命理的奥秘</h1>
            <p class="hero-subtitle">了解自己的命运轨迹，掌握改变人生的钥匙</p>
            
            <div class="bazi-elements">
                <div class="element">木</div>
                <div class="element">火</div>
                <div class="element">土</div>
                <div class="element">金</div>
                <div class="element">水</div>
            </div>
            
            <a href="seven.html" class="cta-button">开始探索命理奥秘</a>
            
            <p class="hero-subtitle" style="font-size: 1.2rem; max-width: 800px; margin: 0 auto;">
                八字命理不仅是预测工具，更是了解自我、把握机遇的智慧。<br>
                通过分析五行生克、十神关系，我们可以预见人生起伏，<br>
                在关键时刻做出明智选择，实现"我命由我不由天"的人生境界。
            </p>
            
            <p class="destiny-quote">
                知命而不认命，顺势而为，逆天改运
            </p>
        </div>
    </section>

    <!-- 新增内容区域 -->
    <section class="content-section">
        <!-- 今日运势概览 -->
        <div class="dashboard-container">
            <div class="dashboard-header">
                <h2><i class="fas fa-calendar-day"></i> 今日运势概览</h2>
                <div class="date-display" id="current-date"></div>
            </div>
            
            <div class="dashboard-grid">
                <!-- 今日能量 -->
                <div class="dashboard-card energy-card">
                    <div class="card-header">
                        <i class="fas fa-bolt"></i>
                        <h3>今日能量指数</h3>
                    </div>
                    <div class="energy-meter">
                        <div class="energy-level" id="today-energy"></div>
                        <div class="energy-labels">
                            <span>低</span>
                            <span>中</span>
                            <span>高</span>
                        </div>
                    </div>
                    <div class="energy-desc" id="energy-desc"></div>
                </div>
                
                <!-- 宜忌 -->
                <div class="dashboard-card suitable-card">
                    <div class="card-header">
                        <i class="fas fa-thumbs-up"></i>
                        <h3>今日宜</h3>
                    </div>
                    <ul class="suitable-list" id="today-suitable"></ul>
                </div>
                
                <div class="dashboard-card avoid-card">
                    <div class="card-header">
                        <i class="fas fa-thumbs-down"></i>
                        <h3>今日忌</h3>
                    </div>
                    <ul class="avoid-list" id="today-avoid"></ul>
                </div>
                
                <!-- 幸运生肖 -->
                <div class="dashboard-card lucky-zodiac">
                    <div class="card-header">
                        <i class="fas fa-star"></i>
                        <h3>今日幸运生肖</h3>
                    </div>
                    <div class="zodiac-icons" id="lucky-zodiacs"></div>
                </div>
            </div>
        </div>
        
        <!-- 生肖运势排行榜 -->
        <div class="ranking-container">
            <h2><i class="fas fa-trophy"></i> 2024年生肖运势排行榜</h2>
            
            <div class="ranking-tabs">
                <button class="ranking-tab active" data-tab="overall">综合运势</button>
                <button class="ranking-tab" data-tab="wealth">财运排行</button>
                <button class="ranking-tab" data-tab="career">事业排行</button>
                <button class="ranking-tab" data-tab="love">感情排行</button>
                <button class="ranking-tab" data-tab="health">健康排行</button>
            </div>
            
            <div class="ranking-content">
                <div class="ranking-tab-content active" id="overall-ranking">
                    <div class="ranking-list" id="overall-list"></div>
                </div>
                <div class="ranking-tab-content" id="wealth-ranking">
                    <div class="ranking-list" id="wealth-list"></div>
                </div>
                <div class="ranking-tab-content" id="career-ranking">
                    <div class="ranking-list" id="career-list"></div>
                </div>
                <div class="ranking-tab-content" id="love-ranking">
                    <div class="ranking-list" id="love-list"></div>
                </div>
                <div class="ranking-tab-content" id="health-ranking">
                    <div class="ranking-list" id="health-list"></div>
                </div>
            </div>
        </div>
        
        <!-- 本月生肖运势建议 -->
        <div class="monthly-zodiac-container">
            <h2><i class="fas fa-calendar-alt"></i> 本月生肖运势建议</h2>
            <div class="zodiac-grid" id="monthly-zodiac-advice"></div>
        </div>
        
        <!-- 能量预测 -->
        <div class="energy-forecast-container">
            <h2><i class="fas fa-chart-line"></i> 能量预测</h2>
            
            <div class="forecast-tabs">
                <button class="forecast-tab active" data-tab="year">年度能量</button>
                <button class="forecast-tab" data-tab="month">本月能量</button>
                <button class="forecast-tab" data-tab="week">本周能量</button>
            </div>
            
            <div class="forecast-content">
                <div class="forecast-tab-content active" id="year-forecast">
                    <div class="forecast-desc" id="year-energy-desc"></div>
                    <div class="energy-graph" id="year-energy-graph"></div>
                </div>
                <div class="forecast-tab-content" id="month-forecast">
                    <div class="forecast-desc" id="month-energy-desc"></div>
                    <div class="energy-graph" id="month-energy-graph"></div>
                </div>
                <div class="forecast-tab-content" id="week-forecast">
                    <div class="forecast-desc" id="week-energy-desc"></div>
                    <div class="energy-graph" id="week-energy-graph"></div>
                </div>
            </div>
        </div>
        
        <!-- 生肖互动小游戏 -->
        <div class="zodiac-game-container">
            <h2><i class="fas fa-gamepad"></i> 生肖互动小游戏</h2>
            <div class="game-content">
                <div class="game-intro">
                    <p>测试你与不同生肖的契合度，看看哪些生肖是你的贵人！</p>
                </div>
                <div class="game-area">
                    <div class="user-zodiac-selector">
                        <h3>选择你的生肖</h3>
                        <div class="zodiac-selector" id="user-zodiac"></div>
                    </div>
                    <div class="target-zodiac-selector">
                        <h3>选择目标生肖</h3>
                        <div class="zodiac-selector" id="target-zodiac"></div>
                    </div>
                    <button class="game-button" id="check-compatibility">测试契合度</button>
                    <div class="game-result" id="compatibility-result"></div>
                </div>
            </div>
        </div>
        
        <!-- 每日命理小知识 -->
        <div class="knowledge-container">
            <h2><i class="fas fa-lightbulb"></i> 每日命理小知识</h2>
            <div class="knowledge-card">
                <div class="knowledge-content" id="daily-knowledge"></div>
                <div class="knowledge-source">每日更新 · 源自传统命理智慧</div>
            </div>
        </div>
    </section>
    
    <script src="js/lunar.js"></script>
    <script>
        // 创建星空背景
        document.addEventListener('DOMContentLoaded', function() {
            const starsContainer = document.getElementById('stars');
            const starCount = 200;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                // 随机大小 (1-3px)
                const size = Math.random() * 2 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                // 随机位置
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                
                // 随机闪烁时间 (2-5秒)
                star.style.setProperty('--duration', `${Math.random() * 3 + 2}s`);
                
                starsContainer.appendChild(star);
            }
            
            // 五行元素交互效果
            const elements = document.querySelectorAll('.element');
            
            elements.forEach((el) => {
                // 点击效果
                el.addEventListener('click', function() {
                    // 创建波纹效果
                    const ripple = document.createElement('span');
                    ripple.classList.add('ripple');
                    
                    // 设置波纹位置
                    const rect = this.getBoundingClientRect();
                    const x = event.clientX - rect.left;
                    const y = event.clientY - rect.top;
                    
                    ripple.style.left = `${x}px`;
                    ripple.style.top = `${y}px`;
                    
                    this.appendChild(ripple);
                    
                    // 动画结束后移除
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                    
                    // 弹跳效果
                    this.style.animation = 'none';
                    void this.offsetWidth; // 触发重绘
                    this.style.animation = 'elementClick 0.5s ease-out';
                });
                
                // 鼠标悬停时轻微抖动
                el.addEventListener('mouseover', function() {
                    this.style.animation = 'float 3s ease-in-out infinite';
                });
                
                // 鼠标移出恢复原状
                el.addEventListener('mouseout', function() {
                    this.style.animation = 'float 6s ease-in-out infinite';
                });
            });
            
            // 按钮点击波纹效果
            const buttons = document.querySelectorAll('.cta-button');
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    // 移除之前的波纹
                    const oldRipple = this.querySelector('.ripple');
                    if (oldRipple) {
                        oldRipple.remove();
                    }
                    
                    // 创建新的波纹
                    const ripple = document.createElement('span');
                    ripple.classList.add('ripple');
                    
                    // 设置波纹位置
                    const rect = this.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    ripple.style.left = `${x}px`;
                    ripple.style.top = `${y}px`;
                    
                    this.appendChild(ripple);
                    
                    // 动画结束后移除
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });
            
            // 元素循环发光效果
            function elementGlow() {
                elements.forEach((el, index) => {
                    setTimeout(() => {
                        el.style.boxShadow = '0 0 40px rgba(255, 255, 255, 0.8)';
                        setTimeout(() => {
                            el.style.boxShadow = '0 0 30px rgba(255, 255, 255, 0.3)';
                        }, 1000);
                    }, index * 300);
                });
                
                setTimeout(elementGlow, 3000);
            }
            
            // 启动循环发光效果
            setTimeout(elementGlow, 2000);
            
            // 加载八字数据
            loadBaziData();
            
            // 排行榜标签切换
            setupTabSwitching('.ranking-tab', '.ranking-tab-content');
            
            // 能量预测标签切换
            setupTabSwitching('.forecast-tab', '.forecast-tab-content');
            
            // 初始化生肖互动游戏
            initZodiacGame();
        });
        
        function setupTabSwitching(tabSelector, contentSelector) {
            const tabs = document.querySelectorAll(tabSelector);
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // 移除所有active类
                    document.querySelectorAll(tabSelector).forEach(t => t.classList.remove('active'));
                    document.querySelectorAll(contentSelector).forEach(c => c.classList.remove('active'));
                    
                    // 添加active类到当前标签和对应内容
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(`${tabId}-${contentSelector.replace('.', '')}`).classList.add('active');
                });
            });
        }
        
        function loadBaziData() {
            // 获取当前日期
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const day = now.getDate();
            
            // 显示当前日期
            document.getElementById('current-date').textContent = `${year}年${month}月${day}日`;
            
            // 模拟从lunar.js获取数据
            // 实际使用时替换为真实的lunar.js API调用
            
            // 今日运势数据
            const todayData = {
                energy: 75, // 0-100
                energyDesc: "今日能量中等偏上，适合处理重要事务，但下午3-5点能量较低，建议避免重大决策。",
                suitable: ["签约", "搬家", "投资", "社交", "学习新技能"],
                avoid: ["借贷", "争吵", "远行", "手术", "重大变更"],
                luckyZodiacs: ["鼠", "龙", "猴"]
            };
            
            // 更新今日运势
            updateTodayFortune(todayData);
            
            // 生肖排行榜数据
            const zodiacRankings = {
                overall: [
                    {name: "龙", score: 95, desc: "运势最佳，贵人相助"},
                    {name: "鼠", score: 88, desc: "财运亨通，事业顺利"},
                    {name: "猴", score: 85, desc: "桃花旺盛，人际关系佳"},
                    {name: "虎", score: 80, desc: "稳步上升，需注意健康"},
                    {name: "狗", score: 78, desc: "平稳发展，宜守不宜攻"},
                    {name: "蛇", score: 75, desc: "小有波折，但终能化解"},
                    {name: "马", score: 70, desc: "压力较大，需调整心态"},
                    {name: "猪", score: 68, desc: "财运一般，宜谨慎投资"},
                    {name: "兔", score: 65, desc: "变动较多，需灵活应对"},
                    {name: "牛", score: 62, desc: "挑战重重，坚持不懈"},
                    {name: "鸡", score: 60, desc: "小人作祟，谨言慎行"},
                    {name: "羊", score: 55, desc: "运势低迷，宜保守行事"}
                ],
                wealth: [
                    {name: "鼠", score: 90, desc: "偏财运佳，投资获利"},
                    {name: "龙", score: 88, desc: "正财稳定，副业增收"},
                    {name: "猴", score: 85, desc: "意外之财，但需节制"},
                    {name: "狗", score: 80, desc: "财运平稳，储蓄增加"},
                    {name: "虎", score: 75, desc: "收入增长，但开支大"},
                    {name: "蛇", score: 70, desc: "财运普通，宜守财"},
                    {name: "马", score: 65, desc: "财务压力，需规划"},
                    {name: "猪", score: 63, desc: "正财一般，忌投机"},
                    {name: "兔", score: 60, desc: "财运波动，谨慎理财"},
                    {name: "牛", score: 58, desc: "收入减少，节俭为宜"},
                    {name: "鸡", score: 55, desc: "破财风险，看好钱包"},
                    {name: "羊", score: 50, desc: "财务紧张，避免借贷"}
                ],
                career: [
                    {name: "龙", score: 92, desc: "事业腾飞，晋升机会"},
                    {name: "鼠", score: 88, desc: "表现突出，领导赏识"},
                    {name: "猴", score: 85, desc: "人脉拓展，合作顺利"},
                    {name: "虎", score: 80, desc: "稳步前进，积累经验"},
                    {name: "狗", score: 78, desc: "工作稳定，按部就班"},
                    {name: "蛇", score: 75, desc: "小有挑战，终能克服"},
                    {name: "马", score: 70, desc: "压力增大，需坚持"},
                    {name: "猪", score: 68, desc: "平淡无奇，等待时机"},
                    {name: "兔", score: 65, desc: "变动频繁，适应变化"},
                    {name: "牛", score: 62, desc: "阻力较大，耐心应对"},
                    {name: "鸡", score: 60, desc: "职场是非，谨言慎行"},
                    {name: "羊", score: 55, desc: "事业低谷，韬光养晦"}
                ],
                love: [
                    {name: "猴", score: 90, desc: "桃花旺盛，魅力四射"},
                    {name: "龙", score: 88, desc: "感情甜蜜，关系升温"},
                    {name: "鼠", score: 85, desc: "单身遇缘，已婚和谐"},
                    {name: "狗", score: 80, desc: "稳定发展，考虑未来"},
                    {name: "虎", score: 78, desc: "热情似火，注意沟通"},
                    {name: "蛇", score: 75, desc: "小有摩擦，宽容化解"},
                    {name: "马", score: 72, desc: "感情平淡，需要惊喜"},
                    {name: "猪", score: 70, desc: "单身等待，已婚稳定"},
                    {name: "兔", score: 68, desc: "情绪波动，影响关系"},
                    {name: "牛", score: 65, desc: "沟通不畅，容易误会"},
                    {name: "鸡", score: 62, desc: "感情复杂，理清思绪"},
                    {name: "羊", score: 60, desc: "孤独感强，主动社交"}
                ],
                health: [
                    {name: "龙", score: 90, desc: "精力充沛，状态极佳"},
                    {name: "鼠", score: 88, desc: "体质强健，少病少灾"},
                    {name: "猴", score: 85, desc: "活力十足，注意休息"},
                    {name: "狗", score: 82, desc: "健康平稳，适度运动"},
                    {name: "虎", score: 80, desc: "小有不适，及时调理"},
                    {name: "蛇", score: 78, desc: "慢性问题，定期检查"},
                    {name: "马", score: 75, desc: "压力影响，注意睡眠"},
                    {name: "猪", score: 73, desc: "肠胃敏感，饮食注意"},
                    {name: "兔", score: 70, desc: "情绪不稳，影响健康"},
                    {name: "牛", score: 68, desc: "劳累过度，需要休息"},
                    {name: "鸡", score: 65, desc: "抵抗力低，预防感冒"},
                    {name: "羊", score: 62, desc: "健康欠佳，全面调理"}
                ]
            };
            
            // 更新生肖排行榜
            updateZodiacRankings(zodiacRankings);
            
            // 本月生肖运势建议
            const monthlyAdvice = [
                {zodiac: "鼠", advice: "本月财运亨通，但需注意健康，避免过度劳累。事业上有贵人相助，把握机会展现才能。"},
                {zodiac: "牛", advice: "本月工作压力大，需保持耐心。感情方面需多沟通，避免误会积累。健康注意肠胃问题。"},
                {zodiac: "虎", advice: "本月事业运上升，有晋升机会。财运平稳，宜储蓄不宜投机。感情上需多花时间陪伴伴侣。"},
                {zodiac: "兔", advice: "本月变动较多，需灵活应对。财运起伏大，谨慎投资。健康注意睡眠质量。"},
                {zodiac: "龙", advice: "本月运势最佳，各方面顺利。事业有突破，财运亨通。感情甜蜜，单身者易遇良缘。"},
                {zodiac: "蛇", advice: "本月小有波折，但终能化解。工作上需注意细节。财运一般，宜守不宜攻。健康注意呼吸道。"},
                {zodiac: "马", advice: "本月压力较大，需调整心态。事业上遇到挑战，坚持不懈终有收获。感情需主动沟通。"},
                {zodiac: "羊", advice: "本月运势低迷，宜保守行事。工作上谨言慎行。财运紧张，避免借贷。健康全面调理。"},
                {zodiac: "猴", advice: "本月人缘佳，社交活跃。桃花运旺盛，单身者机会多。财运不错，但需节制消费。"},
                {zodiac: "鸡", advice: "本月小人作祟，谨言慎行。工作上避免卷入是非。财运有破财风险，看好钱包。"},
                {zodiac: "狗", advice: "本月平稳发展，按部就班。感情稳定，考虑长远。健康良好，适度运动。"},
                {zodiac: "猪", advice: "本月平淡无奇，等待时机。工作上缺乏突破。财运一般，忌投机。健康注意饮食规律。"}
            ];
            
            // 更新本月运势建议
            updateMonthlyAdvice(monthlyAdvice);
            
            // 能量预测数据
            const energyForecast = {
                year: {
                    desc: "2024年整体能量呈上升趋势，春季能量较低，夏季开始回升，秋季达到高峰，冬季平稳。属木、火的行业将有较好发展，属金的行业需谨慎。",
                    data: [60, 65, 70, 75, 80, 85, 90, 85, 80, 75, 70, 65]
                },
                month: {
                    desc: "本月能量前半月较低，后半月逐渐升高。第2周和第4周是能量高峰，适合重要决策和行动。注意本月第3周能量低谷，避免重大变更。",
                    data: [65, 70, 68, 72, 75, 80, 78, 82, 85, 88, 85, 80, 78, 75, 80, 85, 88, 90, 88, 85, 82, 80, 85, 88, 90, 92, 90, 88, 85, 82]
                },
                week: {
                    desc: "本周能量周三最高，周一周五较低。周二和周四适合处理复杂事务，周末能量平稳，适合休息和社交。",
                    data: [70, 75, 85, 80, 68, 75, 72]
                }
            };
            
            // 更新能量预测
            updateEnergyForecast(energyForecast);
            
            // 每日命理小知识
            const dailyKnowledge = [
                "八字中的'日主'代表命主本人，通过分析日主与其他七个字的生克关系，可以判断一个人的性格和命运走向。",
                "五行相生：木生火，火生土，土生金，金生水，水生木。相生关系代表助力和支持。",
                "五行相克：木克土，土克水，水克火，火克金，金克木。相克关系代表制约和挑战。",
                "十神是八字分析中的重要概念，包括比肩、劫财、食神、伤官、偏财、正财、七杀、正官、偏印、正印，每种代表不同的人际关系和命运特征。",
                "大运是十年一换的运势周期，流年是一年的运势，两者结合可以更准确地预测每年的吉凶祸福。",
                "八字中五行平衡最为理想，某种五行过旺或过弱都会导致相应的性格缺陷和运势问题。",
                "天干地支不仅代表时间，也代表空间和物质，在八字分析中需要综合考虑其多重含义。",
                "八字中的'用神'是对命主最有利的五行，找到并补足用神是改善运势的关键。",
                "'喜神'和'忌神'是八字分析中的重要概念，喜神带来好运，忌神带来挑战，了解它们可以帮助趋吉避凶。",
                "八字合婚是通过分析两人八字的相合程度，预测婚姻是否和谐的传统方法。"
            ];
            
            // 更新每日知识
            updateDailyKnowledge(dailyKnowledge);
        }
        
        function updateTodayFortune(data) {
            // 更新今日能量
            document.getElementById('today-energy').style.width = `${data.energy}%`;
            document.getElementById('energy-desc').textContent = data.energyDesc;
            
            // 更新今日宜忌
            const suitableList = document.getElementById('today-suitable');
            const avoidList = document.getElementById('today-avoid');
            
            suitableList.innerHTML = '';
            avoidList.innerHTML = '';
            
            data.suitable.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                suitableList.appendChild(li);
            });
            
            data.avoid.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                avoidList.appendChild(li);
            });
            
            // 更新幸运生肖
            const luckyZodiacs = document.getElementById('lucky-zodiacs');
            luckyZodiacs.innerHTML = '';
            
            data.luckyZodiacs.forEach(zodiac => {
                const span = document.createElement('span');
                span.className = 'zodiac-icon';
                span.textContent = zodiac;
                luckyZodiacs.appendChild(span);
            });
        }
        
        function updateZodiacRankings(rankings) {
            // 更新综合运势排行
            updateRankingList('overall-list', rankings.overall);
            updateRankingList('wealth-list', rankings.wealth);
            updateRankingList('career-list', rankings.career);
            updateRankingList('love-list', rankings.love);
            updateRankingList('health-list', rankings.health);
        }
        
        function updateRankingList(listId, data) {
            const list = document.getElementById(listId);
            list.innerHTML = '';
            
            data.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'ranking-item';
                
                const rankClass = index < 3 ? 'top-rank' : '';
                
                div.innerHTML = `
                    <div class="ranking-rank ${rankClass}">${index + 1}</div>
                    <div class="ranking-zodiac">${item.name}</div>
                    <div class="ranking-score">
                        <div class="score-bar" style="width: ${item.score}%"></div>
                        <span class="score-value">${item.score}</span>
                    </div>
                    <div class="ranking-desc">${item.desc}</div>
                `;
                
                list.appendChild(div);
            });
        }
        
        function updateMonthlyAdvice(adviceList) {
            const container = document.getElementById('monthly-zodiac-advice');
            container.innerHTML = '';
            
            adviceList.forEach(item => {
                const card = document.createElement('div');
                card.className = 'zodiac-advice-card';
                
                card.innerHTML = `
                    <div class="zodiac-header">
                        <span class="zodiac-icon">${item.zodiac}</span>
                        <h3>${item.zodiac}生肖</h3>
                    </div>
                    <div class="zodiac-advice">${item.advice}</div>
                `;
                
                container.appendChild(card);
            });
        }
        
        function updateEnergyForecast(forecast) {
            // 更新年度能量预测
            document.getElementById('year-energy-desc').textContent = forecast.year.desc;
            drawEnergyGraph('year-energy-graph', forecast.year.data, '月');
            
            // 更新月度能量预测
            document.getElementById('month-energy-desc').textContent = forecast.month.desc;
            drawEnergyGraph('month-energy-graph', forecast.month.data, '日');
            
            // 更新周能量预测
            document.getElementById('week-energy-desc').textContent = forecast.week.desc;
            drawEnergyGraph('week-energy-graph', forecast.week.data, '天');
        }
        
        function drawEnergyGraph(elementId, data, unit) {
            const container = document.getElementById(elementId);
            container.innerHTML = '';
            
            const maxValue = Math.max(...data);
            const graphHeight = 150;
            
            data.forEach((value, index) => {
                const bar = document.createElement('div');
                bar.className = 'energy-bar';
                
                const barHeight = (value / maxValue) * graphHeight;
                bar.style.height = `${barHeight}px`;
                
                const label = document.createElement('div');
                label.className = 'energy-label';
                label.textContent = `${index + 1}${unit}`;
                
                const valueDisplay = document.createElement('div');
                valueDisplay.className = 'energy-value';
                valueDisplay.textContent = value;
                
                bar.appendChild(valueDisplay);
                
                const barContainer = document.createElement('div');
                barContainer.className = 'energy-bar-container';
                barContainer.appendChild(bar);
                barContainer.appendChild(label);
                
                container.appendChild(barContainer);
            });
        }
        
        function updateDailyKnowledge(knowledgeList) {
            const knowledgeElement = document.getElementById('daily-knowledge');
            const today = new Date().getDate();
            const index = today % knowledgeList.length;
            knowledgeElement.textContent = knowledgeList[index];
        }
        
        function initZodiacGame() {
            const zodiacs = ["鼠", "牛", "虎", "兔", "龙", "蛇", "马", "羊", "猴", "鸡", "狗", "猪"];
            const userZodiac = document.getElementById('user-zodiac');
            const targetZodiac = document.getElementById('target-zodiac');
            
            // 创建生肖选择器
            zodiacs.forEach(zodiac => {
                const span = document.createElement('span');
                span.className = 'zodiac-option';
                span.textContent = zodiac;
                span.addEventListener('click', function() {
                    document.querySelectorAll('#user-zodiac .zodiac-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
                userZodiac.appendChild(span);
                
                const span2 = document.createElement('span');
                span2.className = 'zodiac-option';
                span2.textContent = zodiac;
                span2.addEventListener('click', function() {
                    document.querySelectorAll('#target-zodiac .zodiac-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
                targetZodiac.appendChild(span2);
            });
            
            // 设置默认选择
            userZodiac.children[0].classList.add('selected');
            targetZodiac.children[1].classList.add('selected');
            
            // 测试契合度按钮
            document.getElementById('check-compatibility').addEventListener('click', function() {
                const userSelected = document.querySelector('#user-zodiac .selected').textContent;
                const targetSelected = document.querySelector('#target-zodiac .selected').textContent;
                
                if (userSelected === targetSelected) {
                    showCompatibilityResult("同一生肖，契合度100%！你们有相似的思维方式和行为模式，容易理解彼此。");
                    return;
                }
                
                // 简单模拟契合度计算
                const compatibilityMap = {
                    "鼠": {"牛": 90, "龙": 85, "猴": 80, "其他": 60},
                    "牛": {"鼠": 90, "蛇": 85, "鸡": 80, "其他": 60},
                    "虎": {"猪": 90, "马": 85, "狗": 80, "其他": 60},
                    "兔": {"狗": 90, "羊": 85, "猪": 80, "其他": 60},
                    "龙": {"鸡": 90, "鼠": 85, "猴": 80, "其他": 60},
                    "蛇": {"牛": 85, "鸡": 80, "其他": 60},
                    "马": {"羊": 90, "虎": 85, "狗": 80, "其他": 60},
                    "羊": {"马": 90, "兔": 85, "猪": 80, "其他": 60},
                    "猴": {"鼠": 80, "龙": 80, "其他": 60},
                    "鸡": {"牛": 80, "龙": 80, "蛇": 80, "其他": 60},
                    "狗": {"兔": 90, "虎": 85, "马": 80, "其他": 60},
                    "猪": {"虎": 90, "兔": 85, "羊": 80, "其他": 60}
                };
                
                let score = 60;
                if (compatibilityMap[userSelected] && compatibilityMap[userSelected][targetSelected]) {
                    score = compatibilityMap[userSelected][targetSelected];
                }
                
                const descriptions = [
                    "你们之间可能存在一些冲突，需要更多理解和包容。",
                    "你们有基本的相处基础，但需要努力维持关系。",
                    "你们相处融洽，有不错的默契和互补性。",
                    "你们是天作之合，彼此理解支持，关系和谐。"
                ];
                
                let descIndex = 0;
                if (score >= 90) descIndex = 3;
                else if (score >= 80) descIndex = 2;
                else if (score >= 70) descIndex = 1;
                
                showCompatibilityResult(`生肖${userSelected}和${targetSelected}的契合度是${score}%！${descriptions[descIndex]}`);
            });
        }
        
        function showCompatibilityResult(text) {
            const resultElement = document.getElementById('compatibility-result');
            resultElement.textContent = text;
            resultElement.style.display = 'block';
            
            // 添加动画效果
            resultElement.style.animation = 'none';
            void resultElement.offsetWidth;
            resultElement.style.animation = 'fadeIn 0.5s ease-out';
        }
    </script>
    <script src="js/ink.js"></script>
</body>
</html>
