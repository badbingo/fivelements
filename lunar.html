<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>八字排盘</title>
  <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.7.2/lunar.min.js"></script>
</head>
<body>
  <h1>八字排盘</h1>
  <label>公历生日（yyyy-mm-dd hh）:</label>
  <input type="datetime-local" id="birth" />
  <button onclick="generateBazi()">排盘</button>

  <div id="result"></div>

  <script>
    function generateBazi() {
      const birth = document.getElementById('birth').value;
      if (!birth) {
        alert("请输入出生时间");
        return;
      }

      const [datePart, timePart] = birth.split('T');
      const [year, month, day] = datePart.split('-').map(Number);
      const hour = Number(timePart.split(':')[0]);

      const solar = Lunar.Solar.fromYmdHms(year, month, day, hour, 0, 0);
      const lunar = solar.getLunar();

      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = `
        <p><strong>农历：</strong> ${lunar.toFullString()}</p >
        <p><strong>八字：</strong> ${lunar.getEightChar().toString()}</p >
        <p><strong>年柱：</strong> ${lunar.getEightChar().getYear()}</p >
        <p><strong>月柱：</strong> ${lunar.getEightChar().getMonth()}</p >
        <p><strong>日柱：</strong> ${lunar.getEightChar().getDay()}</p >
        <p><strong>时柱：</strong> ${lunar.getEightChar().getTime()}</p >
      `;
    }
  </script>
</body>
</html>
