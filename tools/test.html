<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>八字计算器 - 麦八字教学网</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* 基础样式 */
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #c00;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        
        /* 五行颜色 */
        .wuxing-mu { color: #2e7d32; }  /* 木 */
        .wuxing-huo { color: #c62828; } /* 火 */
        .wuxing-tu { color: #8d6e63; }  /* 土 */
        .wuxing-jin { color: #1565c0; } /* 金 */
        .wuxing-shui { color: #0277bd; } /* 水 */
        
        /* 交互样式 */
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }
        .tab.active {
            border-bottom-color: #c00;
            font-weight: bold;
        }
        
        /* 强度条 */
        .strength-meter {
            height: 25px;
            background: #f0f0f0;
            border-radius: 13px;
            margin: 15px 0;
            overflow: hidden;
            position: relative;
        }
        .strength-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            width: 0;
            transition: width 1s;
        }
        .strength-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        
        /* 五行平衡 */
        .wuxing-balance {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            gap: 10px;
        }
        .wuxing-item {
            flex: 1;
            text-align: center;
            padding: 15px 5px;
            border-radius: 5px;
        }
        .wuxing-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .wuxing-count {
            font-size: 1.2em;
            font-weight: bold;
        }
        
        /* 响应式 */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            .wuxing-balance {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-calculator"></i> 八字排盘计算器</h1>
        
        <div class="input-section">
            <h2>基本信息</h2>
            <div>
                <label>出生日期：</label>
                <input type="date" id="birth-date">
            </div>
            <div>
                <label>出生时间：</label>
                <select id="birth-hour">
                    <option value="">-- 时 --</option>
                    <script>
                        for(let i=0; i<24; i++) {
                            document.write(`<option value="${i}">${i}时</option>`);
                        }
                    </script>
                </select>
                <select id="birth-minute">
                    <option value="">-- 分 --</option>
                    <script>
                        for(let i=0; i<60; i++) {
                            document.write(`<option value="${i}">${i}分</option>`);
                        }
                    </script>
                </select>
            </div>
            <div>
                <label>性别：</label>
                <label><input type="radio" name="gender" value="男" checked> 男</label>
                <label><input type="radio" name="gender" value="女"> 女</label>
            </div>
            <button id="calculate-btn">排盘</button>
        </div>
        
        <div id="result-section" style="display:none;">
            <h2>八字排盘结果</h2>
            
            <div class="basic-info">
                <p>出生时间：<span id="result-date"></span> <span id="result-time"></span></p>
                <p>农历日期：<span id="lunar-date"></span></p>
                <p>八字：<span id="bazi-chars"></span></p>
                <p>生肖：<span id="zodiac"></span> 命宫：<span id="ming-gong"></span> 身宫：<span id="shen-gong"></span></p>
            </div>
            
            <table class="bazi-table">
                <thead>
                    <tr>
                        <th>四柱</th>
                        <th>年柱</th>
                        <th>月柱</th>
                        <th>日柱</th>
                        <th>时柱</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>天干</td>
                        <td id="year-gan"></td>
                        <td id="month-gan"></td>
                        <td id="day-gan"></td>
                        <td id="hour-gan"></td>
                    </tr>
                    <tr>
                        <td>地支</td>
                        <td id="year-zhi"></td>
                        <td id="month-zhi"></td>
                        <td id="day-zhi"></td>
                        <td id="hour-zhi"></td>
                    </tr>
                    <tr>
                        <td>藏干</td>
                        <td id="year-cang"></td>
                        <td id="month-cang"></td>
                        <td id="day-cang"></td>
                        <td id="hour-cang"></td>
                    </tr>
                    <tr>
                        <td>十神</td>
                        <td id="year-shen"></td>
                        <td id="month-shen"></td>
                        <td id="day-shen"></td>
                        <td id="hour-shen"></td>
                    </tr>
                    <tr>
                        <td>纳音</td>
                        <td id="year-nayin"></td>
                        <td id="month-nayin"></td>
                        <td id="day-nayin"></td>
                        <td id="hour-nayin"></td>
                    </tr>
                    <tr>
                        <td>空亡</td>
                        <td id="year-kong"></td>
                        <td id="month-kong"></td>
                        <td id="day-kong"></td>
                        <td id="hour-kong"></td>
                    </tr>
                </tbody>
            </table>
            
            <div class="analysis-section">
                <h3>八字分析</h3>
                
                <div class="tabs">
                    <div class="tab active" data-tab="strength">身强身弱</div>
                    <div class="tab" data-tab="wuxing">五行平衡</div>
                    <div class="tab" data-tab="shensha">神煞</div>
                    <div class="tab" data-tab="dayun">大运</div>
                </div>
                
                <div id="strength-tab" class="tab-content active">
                    <h4>日主强弱分析</h4>
                    <p>您的日主为 <span id="day-master"></span>，分析如下：</p>
                    
                    <div class="strength-meter">
                        <div class="strength-fill" id="strength-fill"></div>
                        <div class="strength-label" id="strength-text"></div>
                    </div>
                    
                    <div id="strength-analysis"></div>
                </div>
                
                <div id="wuxing-tab" class="tab-content">
                    <h4>五行平衡分析</h4>
                    <p>您的八字五行分布如下：</p>
                    
                    <div class="wuxing-balance">
                        <div class="wuxing-item wuxing-mu">
                            <div class="wuxing-name">木</div>
                            <div class="wuxing-count" id="wood-count">0</div>
                        </div>
                        <div class="wuxing-item wuxing-huo">
                            <div class="wuxing-name">火</div>
                            <div class="wuxing-count" id="fire-count">0</div>
                        </div>
                        <div class="wuxing-item wuxing-tu">
                            <div class="wuxing-name">土</div>
                            <div class="wuxing-count" id="earth-count">0</div>
                        </div>
                        <div class="wuxing-item wuxing-jin">
                            <div class="wuxing-name">金</div>
                            <div class="wuxing-count" id="metal-count">0</div>
                        </div>
                        <div class="wuxing-item wuxing-shui">
                            <div class="wuxing-name">水</div>
                            <div class="wuxing-count" id="water-count">0</div>
                        </div>
                    </div>
                    
                    <div id="wuxing-analysis"></div>
                </div>
                
                <div id="shensha-tab" class="tab-content">
                    <h4>神煞分析</h4>
                    <div id="shensha-content"></div>
                </div>
                
                <div id="dayun-tab" class="tab-content">
                    <h4>大运分析</h4>
                    <table id="dayun-table">
                        <thead>
                            <tr>
                                <th>大运</th>
                                <th>起止时间</th>
                                <th>干支</th>
                                <th>十神</th>
                                <th>运势</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- 使用CDN引入lunar.js 1.7.2 -->
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.7.2/dist/lunar.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 标签切换
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(this.dataset.tab + '-tab').classList.add('active');
                });
            });
            
            // 计算按钮
            document.getElementById('calculate-btn').addEventListener('click', function() {
                const birthDate = document.getElementById('birth-date').value;
                const birthHour = document.getElementById('birth-hour').value;
                const birthMinute = document.getElementById('birth-minute').value;
                const gender = document.querySelector('input[name="gender"]:checked').value;
                
                if (!birthDate || birthHour === '' || birthMinute === '') {
                    alert('请填写完整的出生信息');
                    return;
                }
                
                calculateBazi(birthDate, birthHour, birthMinute, gender);
            });
        });
        
        // 八字计算主函数
        function calculateBazi(birthDate, hour, minute, gender) {
            const [year, month, day] = birthDate.split('-').map(Number);
            const solar = Lunar.Solar.fromYmd(year, month, day);
            const lunar = solar.getLunar();
            
            // 获取时辰(23-0点是晚子时，0-1点是早子时)
            let timeGanZhi;
            if (hour == 23) {
                // 晚子时，按次日的日柱计算
                const nextDay = solar.next(1);
                const nextLunar = nextDay.getLunar();
                timeGanZhi = nextLunar.getTimeGanZhi(0);
            } else {
                timeGanZhi = lunar.getTimeGanZhi(hour);
            }
            
            // 填充基本信息
            document.getElementById('result-date').textContent = `${year}年${month}月${day}日`;
            document.getElementById('result-time').textContent = `${hour}:${minute}`;
            document.getElementById('lunar-date').textContent = lunar.toString();
            document.getElementById('zodiac').textContent = lunar.getYearShengXiao();
            
            // 获取八字四柱
            const yearGanZhi = lunar.getYearGanZhi();
            const monthGanZhi = lunar.getMonthGanZhi();
            const dayGanZhi = lunar.getDayGanZhi();
            const hourGanZhi = timeGanZhi;
            
            // 填充八字表格
            document.getElementById('year-gan').innerHTML = formatGanZhi(yearGanZhi, 'year');
            document.getElementById('month-gan').innerHTML = formatGanZhi(monthGanZhi, 'month');
            document.getElementById('day-gan').innerHTML = formatGanZhi(dayGanZhi, 'day');
            document.getElementById('hour-gan').innerHTML = formatGanZhi(hourGanZhi, 'hour');
            
            // 填充地支藏干
            document.getElementById('year-zhi').innerHTML = formatZhi(yearGanZhi.substring(1));
            document.getElementById('month-zhi').innerHTML = formatZhi(monthGanZhi.substring(1));
            document.getElementById('day-zhi').innerHTML = formatZhi(dayGanZhi.substring(1));
            document.getElementById('hour-zhi').innerHTML = formatZhi(hourGanZhi.substring(1));
            
            // 填充藏干
            document.getElementById('year-cang').textContent = getCangGan(yearGanZhi.substring(1));
            document.getElementById('month-cang').textContent = getCangGan(monthGanZhi.substring(1));
            document.getElementById('day-cang').textContent = getCangGan(dayGanZhi.substring(1));
            document.getElementById('hour-cang').textContent = getCangGan(hourGanZhi.substring(1));
            
            // 填充十神
            const dayGan = dayGanZhi.substring(0, 1);
            document.getElementById('year-shen').textContent = getShiShen(dayGan, yearGanZhi.substring(0, 1));
            document.getElementById('month-shen').textContent = getShiShen(dayGan, monthGanZhi.substring(0, 1));
            document.getElementById('day-shen').textContent = "日主";
            document.getElementById('hour-shen').textContent = getShiShen(dayGan, hourGanZhi.substring(0, 1));
            
            // 填充纳音
            document.getElementById('year-nayin').textContent = lunar.getYearNaYin();
            document.getElementById('month-nayin').textContent = lunar.getMonthNaYin();
            document.getElementById('day-nayin').textContent = lunar.getDayNaYin();
            document.getElementById('hour-nayin').textContent = Lunar.LunarUtil.getNaYin(hourGanZhi);
            
            // 填充空亡
            const kongWang = lunar.getDayKongWang();
            document.getElementById('year-kong').textContent = kongWang;
            document.getElementById('month-kong').textContent = kongWang;
            document.getElementById('day-kong').textContent = kongWang;
            document.getElementById('hour-kong').textContent = kongWang;
            
            // 命宫身宫
            const mingGong = lunar.getMingGong();
            const shenGong = lunar.getShenGong();
            document.getElementById('ming-gong').textContent = mingGong;
            document.getElementById('shen-gong').textContent = shenGong;
            
            // 八字字符串
            document.getElementById('bazi-chars').textContent = 
                `${yearGanZhi} ${monthGanZhi} ${dayGanZhi} ${hourGanZhi}`;
            
            // 分析部分
            analyzeBazi(lunar, dayGan, gender);
            
            // 显示结果
            document.getElementById('result-section').style.display = 'block';
        }
        
        // 格式化天干地支显示
        function formatGanZhi(ganZhi, type) {
            const gan = ganZhi.substring(0, 1);
            const zhi = ganZhi.substring(1);
            const wuxing = getWuxing(gan);
            
            let className = 'wuxing-' + wuxing;
            if (type === 'day') {
                return `<span class="${className}" style="font-weight:bold;font-size:1.2em">${gan}<br><span style="font-size:0.8em">(日主)</span></span>`;
            }
            return `<span class="${className}">${gan}</span>`;
        }
        
        // 格式化地支显示
        function formatZhi(zhi) {
            const wuxing = getZhiWuxing(zhi);
            const className = 'wuxing-' + wuxing;
            return `<span class="${className}">${zhi}</span>`;
        }
        
        // 获取天干五行
        function getWuxing(gan) {
            const map = {
                '甲': 'mu', '乙': 'mu',
                '丙': 'huo', '丁': 'huo',
                '戊': 'tu', '己': 'tu',
                '庚': 'jin', '辛': 'jin',
                '壬': 'shui', '癸': 'shui'
            };
            return map[gan] || '';
        }
        
        // 获取地支五行
        function getZhiWuxing(zhi) {
            const map = {
                '子': 'shui', '亥': 'shui',
                '寅': 'mu', '卯': 'mu',
                '巳': 'huo', '午': 'huo',
                '申': 'jin', '酉': 'jin',
                '辰': 'tu', '戌': 'tu', '丑': 'tu', '未': 'tu'
            };
            return map[zhi] || '';
        }
        
        // 获取藏干
        function getCangGan(zhi) {
            const map = {
                '子': '癸',
                '丑': '己癸辛',
                '寅': '甲丙戊',
                '卯': '乙',
                '辰': '戊乙癸',
                '巳': '丙戊庚',
                '午': '丁己',
                '未': '己丁乙',
                '申': '庚壬戊',
                '酉': '辛',
                '戌': '戊辛丁',
                '亥': '壬甲'
            };
            return map[zhi] || '';
        }
        
        // 获取十神
        function getShiShen(dayGan, gan) {
            const dayIndex = Lunar.LunarUtil.getGanIndex(dayGan);
            const ganIndex = Lunar.LunarUtil.getGanIndex(gan);
            const diff = (ganIndex - dayIndex + 10) % 10;
            
            const shenMap = [
                '比肩', '劫财', '偏印', '正印', 
                '七杀', '正官', '偏财', '正财', 
                '食神', '伤官'
            ];
            return shenMap[diff];
        }
        
        // 八字分析
        function analyzeBazi(lunar, dayGan, gender) {
            // 日主分析
            const dayWuxing = getWuxing(dayGan);
            document.getElementById('day-master').textContent = `${dayGan}(${getWuxingName(dayWuxing)})`;
            
            // 身强身弱分析 (简化版)
            const strength = analyzeStrength(lunar, dayGan);
            document.getElementById('strength-fill').style.width = strength.percent + '%';
            document.getElementById('strength-text').textContent = strength.text;
            document.getElementById('strength-analysis').innerHTML = strength.analysis;
            
            // 五行统计
            countWuxing(lunar);
            
            // 大运分析
            analyzeDayun(lunar, gender);
        }
        
        // 身强身弱分析
        function analyzeStrength(lunar, dayGan) {
            // 简化版分析逻辑
            const dayZhi = lunar.getDayGanZhi().substring(1);
            const monthZhi = lunar.getMonthGanZhi().substring(1);
            
            // 判断是否得月令
            const monthWuxing = getZhiWuxing(monthZhi);
            const dayWuxing = getWuxing(dayGan);
            
            let score = 50; // 基础分
            
            // 月令影响 (最重要)
            if (isSheng(monthWuxing, dayWuxing)) {
                score += 30; // 月令生扶
            } else if (isKe(monthWuxing, dayWuxing)) {
                score -= 20; // 月令克制
            } else if (monthWuxing === dayWuxing) {
                score += 20; // 同五行
            }
            
            // 其他柱的影响 (简化处理)
            const yearGan = lunar.getYearGanZhi().substring(0, 1);
            const hourGan = lunar.getTimeGanZhi(12).substring(0, 1); // 默认中午12点
            
            [yearGan, hourGan].forEach(gan => {
                const wuxing = getWuxing(gan);
                if (wuxing === dayWuxing) score += 10; // 比劫
                else if (isSheng(wuxing, dayWuxing)) score += 8; // 印星
                else if (isKe(wuxing, dayWuxing)) score -= 8; // 官杀
            });
            
            // 限制范围
            score = Math.max(10, Math.min(90, score));
            
            // 判断结果
            let text, analysis;
            if (score > 70) {
                text = '身强';
                analysis = `您的日主${dayGan}得月令${getWuxingName(monthWuxing)}生扶，八字身强。身强之人通常精力充沛，行动力强，能承担压力和责任。`;
            } else if (score > 55) {
                text = '偏强';
                analysis = `您的日主${dayGan}得一定生扶，八字偏强。具有较好的抗压能力，但需注意不要过于强势。`;
            } else if (score > 45) {
                text = '中和';
                analysis = `您的日主${dayGan}力量中和，八字平衡。适应能力强，但大运流年影响较大。`;
            } else if (score > 30) {
                text = '偏弱';
                analysis = `您的日主${dayGan}力量稍弱，八字偏弱。需注意补充能量，借助他人力量发展。`;
            } else {
                text = '身弱';
                analysis = `您的日主${dayGan}被克制较多，八字身弱。需特别注意健康和精力管理，宜借助贵人运势。`;
            }
            
            return {
                percent: score,
                text: text,
                analysis: analysis
            };
        }
        
        // 五行相生
        function isSheng(from, to) {
            const shengMap = {
                'mu': 'huo',
                'huo': 'tu',
                'tu': 'jin',
                'jin': 'shui',
                'shui': 'mu'
            };
            return shengMap[from] === to;
        }
        
        // 五行相克
        function isKe(from, to) {
            const keMap = {
                'mu': 'tu',
                'tu': 'shui',
                'shui': 'huo',
                'huo': 'jin',
                'jin': 'mu'
            };
            return keMap[from] === to;
        }
        
        // 获取五行名称
        function getWuxingName(wuxing) {
            const map = {
                'mu': '木',
                'huo': '火',
                'tu': '土',
                'jin': '金',
                'shui': '水'
            };
            return map[wuxing] || '';
        }
        
        // 五行统计
        function countWuxing(lunar) {
            const counts = { mu: 0, huo: 0, tu: 0, jin: 0, shui: 0 };
            
            // 统计天干
            const ganzhi = [
                lunar.getYearGanZhi(),
                lunar.getMonthGanZhi(),
                lunar.getDayGanZhi(),
                lunar.getTimeGanZhi(12) // 默认中午12点
            ];
            
            ganzhi.forEach(gz => {
                const gan = gz.substring(0, 1);
                const zhi = gz.substring(1);
                
                // 天干五行
                const ganWuxing = getWuxing(gan);
                if (ganWuxing) counts[ganWuxing]++;
                
                // 地支五行
                const zhiWuxing = getZhiWuxing(zhi);
                if (zhiWuxing) counts[zhiWuxing]++;
                
                // 藏干五行
                const cangGan = getCangGan(zhi);
                if (cangGan) {
                    for (let c of cangGan) {
                        const wuxing = getWuxing(c);
                        if (wuxing) counts[wuxing] += 0.5; // 藏干权重较低
                    }
                }
            });
            
            // 更新显示
            document.getElementById('wood-count').textContent = Math.round(counts.mu * 2) / 2;
            document.getElementById('fire-count').textContent = Math.round(counts.huo * 2) / 2;
            document.getElementById('earth-count').textContent = Math.round(counts.tu * 2) / 2;
            document.getElementById('metal-count').textContent = Math.round(counts.jin * 2) / 2;
            document.getElementById('water-count').textContent = Math.round(counts.shui * 2) / 2;
            
            // 分析
            let analysis = '您的八字五行分布：';
            for (let w in counts) {
                if (counts[w] > 0) {
                    analysis += `${getWuxingName(w)}${counts[w]} `;
                }
            }
            
            analysis += '<br><br>五行平衡建议：';
            const dayGan = lunar.getDayGanZhi().substring(0, 1);
            const dayWuxing = getWuxing(dayGan);
            
            // 找出最旺和最弱的五行
            let maxWuxing = '', maxCount = 0;
            let minWuxing = '', minCount = 10;
            for (let w in counts) {
                if (counts[w] > maxCount) {
                    maxCount = counts[w];
                    maxWuxing = w;
                }
                if (counts[w] < minCount) {
                    minCount = counts[w];
                    minWuxing = w;
                }
            }
            
            if (maxWuxing === dayWuxing) {
                analysis += `日主${getWuxingName(dayWuxing)}较旺，宜用${getWuxingName(getKeTarget(dayWuxing))}克制或${getWuxingName(getShengTarget(dayWuxing))}泄秀。`;
            } else if (isKe(maxWuxing, dayWuxing)) {
                analysis += `${getWuxingName(maxWuxing)}过旺克制日主，宜用${getWuxingName(getKeTarget(maxWuxing))}制衡。`;
            } else {
                analysis += `五行相对平衡，${getWuxingName(dayWuxing)}为用神最佳。`;
            }
            
            document.getElementById('wuxing-analysis').innerHTML = analysis;
        }
        
        // 获取克制目标
        function getKeTarget(wuxing) {
            const map = { mu: 'jin', huo: 'shui', tu: 'mu', jin: 'huo', shui: 'tu' };
            return map[wuxing] || '';
        }
        
        // 获取生助目标
        function getShengTarget(wuxing) {
            const map = { mu: 'huo', huo: 'tu', tu: 'jin', jin: 'shui', shui: 'mu' };
            return map[wuxing] || '';
        }
        
        // 大运分析
        function analyzeDayun(lunar, gender) {
            const dayunList = lunar.getDaYun();
            const tableBody = document.querySelector('#dayun-table tbody');
            tableBody.innerHTML = '';
            
            dayunList.forEach((dy, index) => {
                const row = document.createElement('tr');
                if (index === 0) row.classList.add('current');
                
                const startAge = dy.getStartAge();
                const startYear = lunar.getSolar().getYear() + startAge;
                const endYear = startYear + 10;
                
                row.innerHTML = `
                    <td>${startAge + 1}-${startAge + 10}岁</td>
                    <td>${startYear}-${endYear}</td>
                    <td>${dy.getGanZhi()}</td>
                    <td>${getShiShen(lunar.getDayGanZhi().substring(0, 1), dy.getGanZhi().substring(0, 1))}</td>
                    <td>${getDayunAnalysis(dy, lunar)}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // 大运分析 (简化版)
        function getDayunAnalysis(dayun, lunar) {
            const dayGan = lunar.getDayGanZhi().substring(0, 1);
            const dayWuxing = getWuxing(dayGan);
            const dyGan = dayun.getGanZhi().substring(0, 1);
            const dyWuxing = getWuxing(dyGan);
            
            if (dyWuxing === dayWuxing) {
                return '比劫运，竞争多但得朋友助';
            } else if (isSheng(dyWuxing, dayWuxing)) {
                return '印运，利学业贵人';
            } else if (isSheng(dayWuxing, dyWuxing)) {
                return '食伤运，利才华发挥';
            } else if (isKe(dyWuxing, dayWuxing)) {
                return '官杀运，压力大但成长';
            } else {
                return '财运，利求财但防耗损';
            }
        }
    </script>
</body>
</html>
